<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Frankie Venter - A Big Deal To Me</title>
<link rel="icon" type="image/png" href="https://www.dropbox.com/scl/fi/iz5j46vmrkod00j7ityln/Five-AM-Icon-Color.png?rlkey=2g6h3skqdpsll99dj6m69n3xy&st=h743pb3r&raw=1">
<link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">

<style>
:root {
  --blur-bg: rgba(255,255,255,0.62);
  --blur-border: rgba(255,255,255,0.28);
  --shadow-heavy: 0 50px 120px rgba(0,0,0,.45);
  --shadow-soft: 0 12px 34px rgba(0,0,0,.22);

  --red:#ff5f56;   /* macOS close */
  --yellow:#ffbd2e;/* macOS minimize */
  --green:#27c93f; /* macOS zoom */
  --accent:#ff69b4;/* brand accent */

  /* Home layout scaling */
  --icon-size: clamp(72px, 9vh, 98px);
  --icon-gap: clamp(36px, 4.8vh, 72px);
  --title-size: clamp(42px, 6.8vh, 64px);
  --top-pad: clamp(100px, 12vh, 160px);
  --bottom-pad: clamp(70px, 9.2vh, 140px);
}

* { box-sizing: border-box; }

html, body {
  margin:0;
  height:100%;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: linear-gradient(135deg, #a205be 0%, #ff69b4 25%, #ff1491bb 50%, #ff69b4 75%, #e969ffd8 100%);
  background-size: 400% 400%;
  animation: gradientWave 8s ease infinite;
  overflow-x:hidden;
  overflow-y:auto;
}

@keyframes gradientWave {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* ===== MENU BAR ===== */
.menu-bar {
  height:28px;
  padding:0 14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:rgba(255,255,255,.82);
  backdrop-filter: saturate(120%) blur(24px);
  font-size:13px;
  font-weight:600;
  box-shadow:0 2px 18px rgba(0,0,0,.12);
}
.menu-left { position: relative; display:flex; align-items:center; gap:8px; }
.menu-dropdown { position:absolute; top:26px; left:0; background:rgba(255,255,255,0.95); border:1px solid rgba(0,0,0,0.08); border-radius:10px; box-shadow:0 16px 36px rgba(0,0,0,0.18); min-width:160px; overflow:hidden; z-index:10000; }
.menu-item { padding:8px 12px; font-size:13px; color:#222; cursor:pointer; }
.menu-item:hover { background:rgba(0,0,0,0.06); }

/* ===== FOOTER ===== */
.footer {
  position:fixed;
  bottom:0;
  height:24px;
  padding:0 14px;
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  left:0;
  right:0;
  color:#fff;
  font-size:12px;
}
.footer p { margin: 0; }
.footer a { color:#fff; text-decoration: underline; }


.welcome-text {
  font-size: var(--title-size);
  font-weight:300;
  color:#fff;
  text-align:center;
  text-shadow:0 2px 8px rgba(0,0,0,.5);
  letter-spacing:-0.5px;
  margin-bottom: clamp(56px, 7vh, 120px);
}

/* ===== HOME DESKTOP LAYOUT ===== */
.desktop {
  display:flex;
  flex-direction:column;
  align-items:center;
  padding: var(--top-pad) 24px var(--bottom-pad);
}
.desktop-icons {
  display:grid;
  grid-template-columns: repeat(4, auto);
  gap: var(--icon-gap);
  justify-content:center;
  justify-items:center;
}
@media (min-width: 1400px) {
  .desktop-icons { grid-template-columns: repeat(5, auto); }
}

.icon {
  width: calc(var(--icon-size) + 28px);
  text-align:center;
  cursor:pointer;
}

.icon-img {
  width: var(--icon-size);
  height: var(--icon-size);
  margin:0 auto 8px;
  border-radius:20px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: clamp(18px, 3.6vh, 36px);
  background:rgba(255,255,255,.2);
  backdrop-filter: blur(12px);
  border:1px solid var(--blur-border);
  box-shadow: var(--shadow-soft);
  transition: transform .15s ease;
  position: relative;
  overflow: hidden;
}
.icon-img:hover { transform: translateY(-3px) scale(1.03) rotate(0.5deg); box-shadow: 0 16px 34px rgba(0,0,0,.22); }

.icon:active .icon-img { transform:scale(.92); }

.icon-label {
  font-size:10px;
  color:#fff;
  background:rgba(0,0,0,.35);
  padding:2px 6px;
  border-radius:5px;
  text-shadow:0 1px 3px rgba(0,0,0,.6);
}
/* ===== WINDOWS ===== */
.window {
  position:fixed;
  inset:auto auto auto auto;
  width:min(980px, 92vw);
  height:min(640px, 82vh);
  display:none;
  flex-direction:column;
  background:var(--blur-bg);
  backdrop-filter: saturate(120%) blur(32px);
  border:1px solid var(--blur-border);
  border-radius:16px;
  box-shadow: 0 60px 120px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.15) inset;
  overflow:hidden;
  transition: left .2s ease, top .2s ease, width .2s ease, height .2s ease, opacity .18s ease, transform .18s ease;
}

.window.active {
  display:flex;
}

/* Focus glow when brought to front */
.window.focused { box-shadow: 0 50px 100px rgba(0,0,0,.55), 0 0 0 2px rgba(255,105,180,.35) inset; }

/* Maximize gentle bounce */
@keyframes bounceIn {
  0% { transform: scale(0.995); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1.0); }
}
.win-bounce { animation: bounceIn 240ms ease-out; }
/* Window open/close animations */
@keyframes winIn {
  from { opacity: 0; transform: scale(0.96) translateY(8px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}
@keyframes winOut {
  to { opacity: 0; transform: scale(0.96) translateY(8px); }
}
.window.anim-open { animation: winIn 240ms ease-out; }
.window.anim-close { animation: winOut 180ms ease-in forwards; }

.window-header {
  height:42px;
  display:flex;
  align-items:center;
  padding:0 14px;
  background:rgba(255,255,255,.38);
  border-bottom:1px solid rgba(0,0,0,.08);
}
.window-header { cursor: move; }
.sidebar-toggle {
  margin-left: auto;
  padding: 6px 10px;
  font-size: 12px;
  border: 1px solid rgba(0,0,0,.1);
  border-radius: 6px;
  background: rgba(255,255,255,.8);
  cursor: pointer;
}

.dots {
  display:flex;
  gap:8px;
}

.dot {
  width:12px;
  height:12px;
  border-radius:50%;
  box-shadow: 0 0 0 1px rgba(0,0,0,0.15) inset, 0 2px 6px rgba(0,0,0,0.25);
}

.close { background:var(--red); cursor:pointer; }
.min   { background:var(--yellow); }
.max   { background:var(--green); }

.window-title {
  flex:1;
  text-align:center;
  font-size:13px;
  font-weight:600;
  color:#222;
  margin-right:48px;
}

/* Resize handle */
.resize-handle {
  position:absolute;
  right:8px;
  bottom:8px;
  width:16px;
  height:16px;
  border-right:2px solid rgba(0,0,0,0.25);
  border-bottom:2px solid rgba(0,0,0,0.25);
  opacity:0.7;
  cursor: se-resize;
}

/* Minimize animation state */
.window.minimizing { opacity: 0; transform: scale(0.96); }

.window-content {
  flex:1;
  background:rgba(255,255,255,.48);
  overflow:auto;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ===== Redesigned Apps ===== */
/* Follow (Social) */
.social-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:18px; padding:24px; width:100%; max-width:900px; }
.social-card { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px; padding:18px; border-radius:14px; background:rgba(255,255,255,.7); backdrop-filter:saturate(120%) blur(10px); border:1px solid var(--blur-border); box-shadow: var(--shadow-soft); text-decoration:none; color:#222; transition:transform .15s ease, box-shadow .2s ease; }
.social-card:hover { transform: translateY(-3px); box-shadow: 0 16px 34px rgba(0,0,0,.22); }
.social-icon-big { font-size:38px; }
.social-name { font-size:13px; font-weight:700; }
.social-handle { font-size:12px; color:#666; }
.social-btn { padding:8px 12px; border-radius:8px; border:1px solid rgba(0,0,0,.1); background:#f5f5f7; font-weight:600; cursor:pointer; }

/* Games */
.games-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:18px; padding:24px; width:100%; max-width:900px; }
.game-card { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px; padding:18px; border-radius:14px; background:rgba(255,255,255,.7); border:1px solid var(--blur-border); box-shadow: var(--shadow-soft); cursor:pointer; transition:transform .15s ease, box-shadow .2s ease; }
.game-card:hover { transform: translateY(-3px); box-shadow: 0 16px 34px rgba(0,0,0,.22); }
.game-title { font-weight:700; color:#222; }
.pong-scorebar { display:flex; gap:10px; align-items:center; justify-content:center; padding:8px 12px; background:rgba(255,255,255,.7); border:1px solid var(--blur-border); border-radius:10px; }

/* To-Do */
.todo-wrap { width:100%; max-width:700px; padding:26px; display:flex; flex-direction:column; gap:14px; }
.todo-header { display:flex; align-items:center; justify-content:space-between; }
.todo-progress { width:100%; height:8px; background:rgba(0,0,0,.08); border-radius:999px; overflow:hidden; }
.todo-progress > span { display:block; height:100%; width:0%; background:linear-gradient(90deg,#ff69b4,#ff1493); border-radius:999px; transition: width .25s ease; }
.todo-list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px; }
.todo-item { display:flex; align-items:center; gap:12px; padding:14px; border-radius:12px; background:rgba(255,255,255,.72); border:1px solid var(--blur-border); }
.todo-toggle { width:42px; height:24px; border-radius:999px; background:rgba(0,0,0,.12); position:relative; cursor:pointer; }
.todo-toggle .thumb { position:absolute; top:3px; left:3px; width:18px; height:18px; border-radius:50%; background:#fff; box-shadow:0 2px 8px rgba(0,0,0,.25); transition:left .2s ease; }
.todo-done .todo-toggle { background:#27c93f; }
.todo-done .todo-toggle .thumb { left:21px; }
.todo-texts { display:flex; flex-direction:column; gap:2px; }
.todo-title { font-size:14px; color:#222; font-weight:700; }
.todo-note { font-size:12px; color:#666; }
.todo-done .todo-title { text-decoration: line-through; color:#777; }

/* Photos (Masonry) */
.masonry-grid { column-width: 260px; column-gap: 16px; padding: 24px; width: 100%; max-width: 1400px; margin: 0 auto; }
.masonry-item { break-inside: avoid; margin-bottom: 16px; position: relative; }
.masonry-item img { width: 100%; border-radius: 12px; box-shadow: var(--shadow-soft); display:block; }
.masonry-item .overlay { position:absolute; inset:auto 8px 8px 8px; background:rgba(0,0,0,.5); color:#fff; padding:8px 10px; border-radius:8px; font-size:12px; opacity:0; transition:opacity .18s ease; }
.masonry-item:hover .overlay { opacity: 1; }

/* Photos Toolbar */
/* (Photos toolbar removed per request) */
.masonry-item { break-inside: avoid; margin-bottom: 16px; border-radius: 12px; overflow: hidden; border: 1px solid var(--blur-border); box-shadow: var(--shadow-soft); background: rgba(255,255,255,.6); cursor: pointer; }
.masonry-item img { width: 100%; height: auto; display: block; transition: transform .25s ease; }
.masonry-item:hover img { transform: scale(1.03); }

/* Videos */
.video-library { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:20px; padding:24px; width:100%; max-width:900px; }
.video-card { display:flex; flex-direction:column; align-items:center; gap:10px; padding:18px; border-radius:14px; background:rgba(255,255,255,.7); border:1px solid var(--blur-border); box-shadow: var(--shadow-soft); cursor:pointer; transition:transform .15s ease, box-shadow .2s ease; }
.video-card:hover { transform: translateY(-3px); box-shadow: 0 16px 34px rgba(0,0,0,.22); }
.video-icon { width:72px; height:72px; border-radius:14px; display:flex; align-items:center; justify-content:center; font-size:36px; background:rgba(255,255,255,.92); border:1px solid #eee; box-shadow:0 8px 20px rgba(0,0,0,.06); }
.video-title { font-size:13px; font-weight:700; color:#222; }


/* ===== MUSIC ===== */
.window-content iframe {
  width:100%;
  height:100%;
  border:none;
}

/* ===== GALLERY ===== */
.gallery-container {
  padding:20px;
}

.photo-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:16px;
}

.photo-item {
  aspect-ratio:1;
  border-radius:10px;
  overflow:hidden;
  background:rgba(0,0,0,.05);
  border:1px solid rgba(255,255,255,.3);
  cursor:pointer;
}

.photo-item img {
  width:100%;
  height:100%;
  object-fit:cover;
  transition:transform .3s ease;
}

.photo-item:hover img { transform:scale(1.06); }

/* ===== NOTES ===== */
.notes-sidebar {
  width:200px;
  border-right:1px solid rgba(0,0,0,.1);
  overflow-y:auto;
  height:100%;
}

.note-item {
  padding:12px;
  border-bottom:1px solid rgba(0,0,0,.05);
  cursor:pointer;
  transition:background .2s ease;
  font-size:12px;
}

.note-item:hover {
  background:rgba(0,0,0,.05);
}

.note-item.active {
  background:rgba(255,105,180,.2);
  border-left:3px solid #ff69b4;
}

.notes-content {
  flex:1;
  padding:20px;
  overflow-y:auto;
  line-height:1.8;
  color:#333;
  font-family: 'Indie Flower', cursive;
  font-size:16px;
  font-weight:400;
}

.notes-content h2 {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  font-size:20px;
  font-weight:600;
  margin-top:0;
  margin-bottom:15px;
  color:#222;
}

.notes-content p {
  font-family: 'Indie Flower', cursive;
  font-size:16px;
}

/* ===== VIDEOS ===== */
.video-grid {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:20px;
  padding:20px;
  width:100%;
  height:100%;
}

.video-item {
  aspect-ratio:16/9;
  border-radius:10px;
  overflow:hidden;
  background:#000;
  cursor:pointer;
  position:relative;
  width:750px;
  height:422px;
  max-width:95%;
}

.video-item iframe {
  width:100%;
  height:100%;
  border:none;
}

.video-item video {
  width:100%;
  height:100%;
  border:none;
}

.video-item::after {
  content:'‚ñ∂';
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-size:40px;
  background:rgba(0,0,0,.3);
  opacity:0;
  transition:opacity .3s ease;
}

.video-item:hover::after {
  opacity:1;
}

/* ===== VIDEO FILES VIEW ===== */
.files-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 24px;
  padding: 24px;
  width: 100%;
  max-width: 820px;
  margin: 0 auto;
}

.file-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 18px;
  border-radius: 14px;
  background: rgba(255,255,255,.6);
  backdrop-filter: blur(12px);
  border: 1px solid var(--blur-border);
  box-shadow: var(--shadow-soft);
  cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease;
}

.file-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 34px rgba(0,0,0,.18);
}
.file-thumb:hover { transform: scale(1.02); transition: transform .18s ease; }
.menu-dropdown.anim-menu-in { animation: menuIn 160ms ease-out; }
@keyframes menuIn { from { opacity: 0; transform: translateY(-6px); } to { opacity: 1; transform: translateY(0); } }

.file-icon {
  width: 72px;
  height: 72px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  background: rgba(255,255,255,.9);
  border: 1px solid #eee;
  box-shadow: 0 8px 20px rgba(0,0,0,.06);
}

.file-title {
  font-size: 12px;
  font-weight: 600;
  color: #222;
  text-align: center;
}

/* Thumb preview for file-card (Photos) */
.file-thumb {
  width: 100%;
  height: 120px;
  border-radius: 10px;
  object-fit: cover;
  border: 1px solid #eee;
}

/* Ripple effect on icon click */
.ripple {
  position: absolute;
  border-radius: 50%;
  transform: scale(0);
  opacity: 0.35;
  background: rgba(255,255,255,0.8);
  pointer-events: none;
  animation: rippleAnim 420ms ease-out forwards;
}
@keyframes rippleAnim {
  to { transform: scale(4); opacity: 0; }
}

/* ===== SHOP ===== */
.shop-container {
  display:flex;
  flex-direction:row;
  align-items:center;
  justify-content:center;
  gap:30px;
  padding:20px;
  flex-wrap:wrap;
  width:100%;
}

.product-card {
  border:1px solid rgba(0,0,0,.1);
  border-radius:10px;
  padding:20px;
  text-align:center;
  transition:transform .2s ease, box-shadow .2s ease;
  width:280px;
  box-shadow: var(--shadow-soft);
}

.product-card:hover {
  transform:translateY(-4px);
  box-shadow:0 8px 20px rgba(0,0,0,.15);
}

.product-img {
  font-size:48px;
  margin-bottom:12px;
  height:80px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.product-card h3 {
  margin:12px 0 8px;
  font-size:16px;
  color:#222;
}

.product-card p {
  font-size:13px;
  color:#666;
  margin:8px 0;
}

.price {
  font-size:18px;
  font-weight:600;
  color:#ff69b4;
  margin:12px 0;
}

.shop-btn {
  width:100%;
  padding:10px;
  background:#ff69b4;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:600;
  transition:background .2s ease;
}

.shop-btn:hover {
  background:#ff1493;
}

/* ===== SOCIAL ===== */
.social-container {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:16px;
  padding:20px;
  width:100%;
  height:100%;
}

.social-row {
  display:flex;
  gap:16px;
  justify-content:center;
}

.social-link {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:16px;
  border-radius:10px;
  background:rgba(255,105,180,.1);
  border:1px solid rgba(255,105,180,.3);
  text-decoration:none;
  color:#222;
  transition:all .2s ease;
  cursor:pointer;
  width:140px;
  height:140px;
}

.social-link:hover {
  background:rgba(255,105,180,.2);
  border-color:#ff69b4;
  transform:translateY(-2px);
}

.social-icon {
  font-size:32px;
  margin-bottom:8px;
}

.social-name {
  font-size:12px;
  font-weight:600;
}

/* ===== MODAL ===== */
.modal {
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.9);
  backdrop-filter: blur(6px);
  z-index:9999;
}

.modal-content {
  position:relative;
  width:90vw;
  height:90vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.modal-img {
  max-width:100%;
  max-height:100%;
  object-fit:contain;
}
/* Dock styling */
#windowDock { backdrop-filter: blur(12px); background: rgba(255,255,255,.85); border: 1px solid rgba(0,0,0,.08); border-radius: 10px; padding: 8px 10px; box-shadow: 0 10px 24px rgba(0,0,0,.18); }
.dock-btn { padding: 6px 10px; border-radius: 8px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.95); cursor: pointer; font-size: 12px; transition: transform .12s ease, box-shadow .15s ease; }
.dock-btn:hover { transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,.16); }

.modal-close {
  position:absolute;
  top:14px;
  right:18px;
  font-size:34px;
  color:#fff;
  cursor:pointer;
}

.nav-btn {
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  font-size:40px;
  color:#fff;
  cursor:pointer;
  padding:14px;
  user-select:none;
}

.prev { left:10px; }
.next { right:10px; }

/* ===== TOUR ===== */
.tour-container {
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  height:100%;
  padding:40px;
}

.coming-soon {
  text-align:center;
  max-width:500px;
}

.coming-soon h1 {
  font-size:48px;
  color:#ff69b4;
  margin:0 0 15px;
  font-weight:700;
}

.error-code {
  font-size:24px;
  color:#666;
  margin:10px 0 20px;
  font-weight:500;
}

.description {
  font-size:14px;
  color:#999;
  margin-bottom:30px;
  line-height:1.6;
}

.waitlist-form {
  display:flex;
  gap:10px;
  margin-bottom:15px;
}

.email-input {
  flex:1;
  padding:12px;
  border:1px solid #ddd;
  border-radius:6px;
  font-size:14px;
  font-family:inherit;
}

.email-input:focus {
  outline:none;
  border-color:#ff69b4;
  box-shadow:0 0 0 3px rgba(255,105,180,.1);
}

.waitlist-btn {
  padding:12px 24px;
  background:#ff69b4;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:600;
  transition:background .2s ease;
  white-space:nowrap;
}

.waitlist-btn:hover {
  background:#ff1493;
}

.form-note {
  font-size:12px;
  color:#999;
  margin:10px 0 0;
}

.form-note.success {
  color:#27c93f;
}

/* ===== MOBILE ===== */
@media (max-width:640px) {
  .desktop { padding:16px; padding-top:32px; height:auto; min-height:calc(100vh - 28px); justify-content:flex-start; }
  .window { height:75vh; }
}

/* ===== APP: NOTES & LYRICS & CREDITS (Split View) ===== */
.split-view {
  display: flex;
  width: 100%;
  height: 100%;
}

.sidebar {
  width: 220px;
  min-width: 220px;
  background: rgba(255,255,255,0.3);
  border-right: 1px solid rgba(0,0,0,0.06);
  overflow-y: auto;
  padding: 10px 0;
}
.sidebar.collapsed {
  width: 0;
  min-width: 0;
  padding: 0;
  border-right: none;
}
.sidebar.collapsed .sidebar-item { display: none; }

.sidebar-item {
  padding: 12px 16px;
  font-size: 13px;
  color: #333;
  cursor: pointer;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  border-bottom: 1px solid rgba(0,0,0,0.03);
}

.sidebar-item:hover { background: rgba(0,0,0,0.03); }
.sidebar-item.active { background: var(--accent); color: white; font-weight: 600; border-radius: 6px; margin: 0 8px; width: auto;}

.main-content {
  flex: 1;
  padding: 30px;
  overflow-y: auto;
  font-size: 15px;
  line-height: 1.6;
  color: #333;
  user-select: text;
}

/* (Draw app styles removed) */

/* ===== RESPONSIVE: Home Grid & Icons ===== */
@media (max-width: 1024px) {
  .desktop-icons { grid-template-columns: repeat(3, 1fr); gap: 60px; }
  .welcome-text { font-size: 40px; }
}
@media (max-width: 640px) {
  .desktop { padding: 16px; height:auto; min-height:calc(100vh - 28px); justify-content:flex-start; }
  .desktop-icons { grid-template-columns: repeat(2, 1fr); gap: 36px; }
  .icon { width: 96px; }
  .icon-img { width: 72px; height: 72px; font-size: 36px; border-radius: 16px; }
  .icon-label { font-size: 10px; }
  .welcome-text { font-size: 28px; margin-bottom: 24px; }
  .window { width: 95vw; height: 80vh; }
}
@media (max-width: 400px) {
  .desktop { padding: 12px; }
  .desktop-icons { grid-template-columns: 1fr 1fr; gap: 28px; }
  .icon { width: 88px; }
  .icon-img { width: 64px; height: 64px; font-size: 30px; }
  .welcome-text { font-size: 24px; }
  .window { width: 95vw; height: 78vh; }
}

/* ===== MOBILE ENHANCEMENTS ===== */
@media (max-width: 480px) {
  :root {
    --shadow-heavy: 0 16px 36px rgba(0,0,0,.30);
    --shadow-soft: 0 8px 18px rgba(0,0,0,.18);
  }
  .menu-bar { backdrop-filter: saturate(110%) blur(6px); }
  .window { backdrop-filter: saturate(110%) blur(12px); box-shadow: var(--shadow-soft); border-radius: 8px; }
  .window-header { cursor: default; }
  .dot { width:18px; height:18px; }
  .dots { gap:12px; }
  /* Full-screen windows below the menu bar */
  .window.active { left:0 !important; right:0 !important; width:100vw !important; top:32px !important; height:calc(100vh - 32px) !important; border-radius: 0; }
  .resize-handle { display:none; }
}

/* Follow app icons */
.social-icon-big { width: 84px; height: 84px; border-radius: 16px; background-size: cover; background-position: center; background-repeat: no-repeat; box-shadow: var(--shadow-soft); }
</style>
</head>

<body>

<!-- Overlays: Loading and Mac-style Login -->

<div id="bootOverlay" style="position:fixed; inset:0; z-index:99999; background:#000; display:flex; align-items:center; justify-content:center;">
  <div style="display:flex; flex-direction:column; align-items:center; gap:20px; width:100%; max-width:480px; padding:24px;">
    <div style="width:84px; height:84px; border-radius:22px; background:rgba(255,255,255,0.9); color:#000; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:24px; box-shadow:0 16px 36px rgba(0,0,0,.4); border:1px solid rgba(0,0,0,.1);">FV</div>
    <div id="bootText" style="color:#fff; font-size:12px; opacity:0.85; letter-spacing:0.2px;">Starting up‚Ä¶ 0%</div>
    <div style="width:80%; max-width:380px; height:6px; border-radius:999px; background:rgba(255,255,255,0.15); overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.25) inset;">
      <div id="bootBar" style="width:0%; height:100%; background:linear-gradient(90deg,#fff,#ddd); border-radius:999px; transition:width .25s ease;"></div>
    </div>
  </div>
</div>

<div id="loginOverlay" style="display:none; position:fixed; inset:0; z-index:99998; background:#2d2d2d; background-image:url('https://www.newzealand.com/assets/Tourism-NZ/Auckland/235640-auckland-city-auckland-web-2560__aWxvdmVrZWxseQo_FocalPointCropWzM1MiwxMDI0LDUwLDUwLDc1LCJqcGciLDY1LDIuNV0.jpg'); background-size:cover; background-position:center; align-items:center; justify-content:center;">
  <div style="width:92%; max-width:520px; padding:24px; text-align:center; background:rgba(255,255,255,0.18); border:1px solid rgba(255,255,255,0.28); border-radius:18px; backdrop-filter: blur(12px); box-shadow: 0 30px 60px rgba(0,0,0,.4);">
    <div style="display:flex; flex-direction:column; align-items:center; gap:14px; margin-bottom:12px;">
      <div style="width:120px; height:120px; border-radius:50%; overflow:hidden; box-shadow:0 20px 40px rgba(0,0,0,0.45); border:2px solid rgba(255,255,255,0.4);">
        <img src="https://t2.genius.com/unsafe/300x300/https%3A%2F%2Fimages.genius.com%2F732e4180ce8e75b5159bbe3ffaf86b98.300x300x1.jpg " alt="Frankie Avatar" style="width:100%; height:100%; object-fit:cover;"/>
      </div>
      <div style="font-weight:700; font-size:22px; color:#fff; text-shadow:0 2px 6px rgba(0,0,0,.5);">Frankie Venter</div>
    </div>
    <div style="display:flex; gap:10px; align-items:center; justify-content:center;">
      <input id="gatePassword" type="password" placeholder="Password" style="flex:1; min-width:0; max-width:360px; padding:12px; border:1px solid rgba(255,255,255,0.35); background:rgba(0,0,0,0.28); color:#fff; border-radius:12px; font-size:14px; outline:none;"/>
      <button id="gateSubmit" style="padding:12px 18px; background:#fff; color:#000; border:none; border-radius:12px; font-weight:700; cursor:pointer; box-shadow:0 8px 18px rgba(0,0,0,.25);">Sign In</button>
    </div>
    <div id="gateStatus" style="min-height:18px; margin-top:12px; font-size:12px; color:#ff5f56; text-align:center;"></div>
  </div>
  <style>
    @keyframes loginFadeOut {
      0% { opacity: 1; filter: blur(0px); transform: scale(1); }
      100% { opacity: 0; filter: blur(12px); transform: scale(1.04); }
    }
    .login-exit { animation: loginFadeOut 600ms ease forwards; }
    @keyframes desktopIn {
      0% { opacity: 0; transform: translateY(10px) scale(0.98); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }
    /* Hide desktop until authenticated */
    .desktop { opacity: 0; pointer-events: none; }
    .desktop-ready .desktop { animation: desktopIn 600ms ease forwards; opacity: 1; pointer-events: auto; }
    .reduce-motion .desktop { animation: none !important; }

    /* Blur only the login background, keep content sharp */
    #loginOverlay { position: fixed; overflow: hidden; }
    #loginOverlay::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image: url('https://www.newzealand.com/assets/Tourism-NZ/Auckland/235640-auckland-city-auckland-web-2560__aWxvdmVrZWxseQo_FocalPointCropWzM1MiwxMDI0LDUwLDUwLDc1LCJqcGciLDY1LDIuNV0.jpg');
      background-size: cover;
      background-position: center;
      filter: blur(10px);
      transform: scale(1.06);
      pointer-events: none;
    }
    #loginOverlay > * { position: relative; z-index: 1; }
  </style>
</div>

<!-- Mobile overlay removed: app now supports mobile -->

<div class="menu-bar">
  <div class="menu-left">
    <img id="appleMenuButton" src="https://www.dropbox.com/scl/fi/jaro7tf2paxju5t9lnflp/747.png?rlkey=akamxf9owvejo8yoj51302xi5&st=8v9mwutn&raw=1" alt="Apple" style="height: 16px; width: auto; cursor: pointer;">
    <div id="appleDropdown" class="menu-dropdown" style="display:none;">
      <div class="menu-item" id="settingsMenuItem" onclick="openSettingsFromMenu()">Settings</div>
      <div class="menu-item" id="logoutMenuItem" onclick="logoutFromMenu()">Log Out</div>
    </div>
  </div>
  <div style="flex: 1; text-align: center; font-weight:700; color:#222;">FrankieOS</div>
  <div id="clock"></div>
</div>

<div class="desktop">
  <div class="welcome-text">Welcome back, Frankie!</div>
  <div class="desktop-icons">
    <div class="icon" onclick="openWindow('music-window')">
      <div class="icon-img" style="background-image:url('https://d1nhio0ox7pgb.cloudfront.net/_img/o_collection_png/green_dark_grey/512x512/plain/cd.png');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Frankie's Demos</div>
    </div>

    <div class="icon" onclick="openWindow('gallery-window')">
      <div class="icon-img" style="background-image:url('https://media.istockphoto.com/id/931643150/vector/picture-icon.jpg?s=612x612&w=0&k=20&c=St-gpRn58eIa8EDAHpn_yO4CZZAnGD6wKpln9l3Z3Ok=');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Frankie's Photos</div>
    </div>

    <div class="icon" onclick="openWindow('notes-window')">
      <div class="icon-img" style="background-image:url('https://static.vecteezy.com/system/resources/previews/029/722/382/non_2x/notes-icon-in-trendy-flat-style-isolated-on-white-background-notes-silhouette-symbol-for-your-website-design-logo-app-ui-illustration-eps10-free-vector.jpg');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Notes</div>
    </div>

    <div class="icon" onclick="openWindow('videos-window')">
      <div class="icon-img" style="background-image:url('https://static.vecteezy.com/system/resources/thumbnails/021/659/265/small/video-player-icon-for-streaming-movies-or-playing-media-vector.jpg');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Videos</div>
    </div>

    <div class="icon" onclick="openWindow('shop-window')">
      <div class="icon-img" style="background-image:url('https://static.vecteezy.com/system/resources/thumbnails/000/583/708/small/shop.jpg');background-size:cover;background-position:center;"></div>
      <div class="icon-label" >Shop</div>
    </div>

    <div class="icon" onclick="openWindow('social-window')">
      <div class="icon-img" style="background-image:url('https://media.istockphoto.com/id/1304192023/vector/brand-engagement.jpg?s=612x612&w=0&k=20&c=DUElGZkFukD3-2N4xOlav39N-3VWjTvC5QOpKbDDkGk=');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Follow</div>
    </div>

    <div class="icon" onclick="openWindow('tour-window')">
      <div class="icon-img" style="background-image:url('https://media.istockphoto.com/id/1414160809/vector/airplane-icon-plane-flight-pictogram-transport-symbol-travel.jpg?s=612x612&w=0&k=20&c=BtgJVW1RQ9a4i8sTMm-Uk-HAFI2sNbDFQVvHbPKbQA4=');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Tour</div>
    </div>

    <div class="icon" onclick="openWindow('credits-window')">
      <div class="icon-img" style="background-image:url('https://media.istockphoto.com/id/1332100919/vector/man-icon-black-icon-person-symbol.jpg?s=612x612&w=0&k=20&c=AVVJkvxQQCuBhawHrUhDRTCeNQ3Jgt0K1tXjJsFy1eg=');background-size:cover;background-position:center;">¬©</div>
      <div class="icon-label">Credits</div>
    </div>

    <div class="icon" onclick="openWindow('lyrics-window')">
      <div class="icon-img" style="background-image:url('https://thumbs.dreamstime.com/b/lyrics-icon-black-line-art-vector-logo-white-outline-set-collection-sign-327909678.jpg');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Lyrics</div>
    </div>

    <div class="icon" onclick="openWindow('letters-window')">
      <div class="icon-img" style="background-image:url('https://static.vecteezy.com/system/resources/previews/026/323/965/non_2x/mail-icon-symbol-design-illustration-vector.jpg');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Letters</div>
    </div>

    <div class="icon" onclick="openWindow('game-window')">
      <div class="icon-img" style="background-image:url('https://static.vecteezy.com/system/resources/previews/035/923/758/non_2x/joystick-icon-design-template-vector.jpg');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Games</div>
    </div>
    <div class="icon" onclick="openWindow('todo-window')">
      <div class="icon-img" style="background-image:url('https://media.istockphoto.com/id/874723624/vector/checklist-on-clip-board-icon-flat-graphic-design.jpg?s=612x612&w=0&k=20&c=tzQwMPU3-aAjkljDPd81SOm3U3ZPOWadA5W1WyWjys0=');background-size:cover;background-position:center;"></div>
      <div class="icon-label">To-Do</div>
    </div>
    <div class="icon" onclick="openWindow('settings-window')">
      <div class="icon-img" style="background-image:url('https://img.icons8.com/m_rounded/1200/settings.jpg');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Settings</div>
    </div>
    <div class="icon" onclick="openLink('https://fiveam.lnk.to/abigdealtome')">
      <div class="icon-img" style="background-image:url('https://www.dropbox.com/scl/fi/ydjexhmo7bzpefle21734/fc55f708c8d651c923055ab1a1d749be.jpg?rlkey=healak5anf4t66tn4msu6qjnz&st=i6oaa054&raw=1');background-size:cover;background-position:center;"></div>
      <div class="icon-label">Listen</div>
    </div>
  </div>
</div>


<div id="music-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('music-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Music Player</div>
  </div>
  <div class="window-content">
    <iframe id="disco-playlist-27299296" name="disco-playlist-27299296" allowfullscreen frameborder="0" class="disco-embed" src="https://fiveam.disco.ac/e/p/27299296?download=true&s=EVvmGgOtx5iRwT7wQD4k4ZtdbIs%3AiznxpykJ&artwork=true&color=%234E98FF&theme=white" width="480" height="395"></iframe>
    <div id="musicFallback" style="display:none;text-align:center;color:#333;">
      <div style="margin-top:12px;font-size:13px;">If the player doesn't load, open it directly:</div>
      <a href="https://fiveam.disco.ac/e/p/27299296?download=true&s=EVvmGgOtx5iRwT7wQD4k4ZtdbIs%3AiznxpykJ&artwork=true&color=%234E98FF&theme=white" target="_blank" style="display:inline-block;margin-top:8px;padding:8px 12px;background:#4e98ff;color:#fff;border-radius:8px;text-decoration:none;">Open Demos</a>
    </div>
  </div>
</div>

<div id="gallery-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('gallery-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Frankie's Photos</div>
  </div>
  <div class="window-content">
    <div class="gallery-container" style="width:100%;height:100%;">
      <div class="masonry-grid" id="photoGrid"></div>
    </div>
  </div>
</div>

<div id="notes-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('notes-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Frankie's Notes</div>
    <button class="sidebar-toggle" onclick="toggleSidebar('notes-window')">‚ò∞ Sidebar</button>
  </div>
  <div class="window-content">
    <div class="split-view">
      <div class="sidebar" id="notesList"></div>
      <div class="main-content" id="noteContent"></div>
    </div>
  </div>
</div>

<div id="credits-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('credits-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Credits</div>
    <button class="sidebar-toggle" onclick="toggleSidebar('credits-window')">‚ò∞ Sidebar</button>
  </div>
  <div class="window-content">
    <div class="split-view">
      <div class="sidebar" id="creditsList"></div>
      <div class="main-content" id="creditContent"></div>
    </div>
  </div>
</div>

<!-- Lyrics App Window -->
<div id="lyrics-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('lyrics-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Lyrics</div>
    <button class="sidebar-toggle" onclick="toggleSidebar('lyrics-window')">‚ò∞ Sidebar</button>
  </div>
  <div class="window-content">
    <div class="split-view">
      <div class="sidebar" id="lyricsList"></div>
      <div class="main-content clean-style" id="lyricContent"></div>
    </div>
  </div>
  </div>

 
<!-- Letters App Window -->
<div id="letters-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('letters-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Letters to Frankie</div>
  </div>
  <div class="window-content" style="align-items:center; flex-direction:column;">
    <div style="margin:auto;max-width:520px;width:100%;padding:24px;">
      <div style="font-size:18px;font-weight:600;color:#222;margin-bottom:8px;">Write a letter to Frankie</div>
      <p style="margin:0 0 16px;color:#555;font-size:14px;line-height:1.7;">Write directly to Frankie! Share a message you'd like Frankie to read. Your words & support mean a lot ‚Äî thank you for taking the time to write.</p>
    </div>
    <form id="lettersForm" style="margin:auto;max-width:520px;width:100%;display:flex;flex-direction:column;gap:16px;align-items:stretch;padding:0 24px 24px;">
      <input type="text" id="fanName" placeholder="Your Name (optional)" style="width:100%;padding:10px;border-radius:6px;border:1px solid #ccc;font-size:15px;">
      <input type="email" id="fanEmail" placeholder="Your Email (required)" required style="width:100%;padding:10px;border-radius:6px;border:1px solid #ccc;font-size:15px;">
      <textarea id="fanMessage" placeholder="Write your message to Frankie..." rows="6" style="width:100%;padding:10px;border-radius:6px;border:1px solid #ccc;font-size:15px;"></textarea>
      <button type="submit" style="padding:10px 24px;background:#ff69b4;color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;">Send</button>
      <div id="lettersThanks" style="color:#27c93f;font-size:14px;display:none;">Thank you for your message!</div>
    </form>
  </div>
  </div>

<!-- Game App Window -->
<div id="game-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('game-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Games</div>
  </div>
  <div class="window-content" style="flex-direction:column;gap:16px;">
    <div id="gamesMenu" class="games-grid" style="display:grid;">
      <div class="game-card" onclick="showPongView()">
        <div style="font-size:42px;">üèì</div>
        <div class="game-title">Frankie Pong</div>
        <div style="font-size:12px;color:#666;">Classic single-player arcade with glow.</div>
      </div>
    </div>

    <div id="pongView" style="display:none;flex-direction:column;align-items:center;justify-content:center;gap:12px;">
      <div style="width:100%;display:flex;justify-content:flex-start;">
        <button onclick="showGamesMenu()" style="padding:6px 10px;border-radius:8px;border:1px solid rgba(0,0,0,.1);background:#f5f5f7;color:#222;font-weight:600;cursor:pointer;">‚Üê Games</button>
      </div>
      <div class="pong-scorebar"><span>Score: <strong id="pongScore">0</strong></span><span>High: <strong id="pongHigh">0</strong></span></div>
      <div id="pongContainer" style="position:relative;display:inline-block;">
        <canvas id="pongCanvas" width="700" height="420" style="max-width:95%;border-radius:10px;border:1px solid rgba(0,0,0,.1);background:#000"></canvas>
        <button id="pongPlayBtn" style="display:none;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);padding:12px 24px;border-radius:10px;border:none;background:#ff69b4;color:#fff;font-weight:700;font-size:16px;box-shadow:0 8px 20px rgba(0,0,0,.2);cursor:pointer;">Play Again</button>
      </div>
      <div style="font-size:12px;color:#666;">Use ‚Üê ‚Üí keys to set paddle direction.</div>
    </div>

    
  </div>
  </div>

<div id="videos-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('videos-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Videos</div>
  </div>
  <div class="window-content">
    <div class="gallery-container">
      <div class="video-grid" id="videoGrid"></div>
    </div>
  </div>
</div>

<div id="shop-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('shop-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Shop</div>
  </div>
  <div class="window-content">
    <div class="shop-container">
      <div class="product-card">
        <div class="product-img">üéµ</div>
        <h3><i>a big deal to me</i> - Vinyl</h3>
        <p>Limited edition vinyl record of Frankie Venter's new EP, <i>a big deal to me</i></p>
        <p class="price">$59.99 NZD</p>
        <button class="shop-btn">Buy Now</button>
      </div>
      <div class="product-card">
        <div class="product-img">üéß</div>
        <h3> <i>a big deal to me</i> Merchandise</h3>
        <p>Official Frankie Venter merch</p>
        <p class="price">$29.99</p>
        <button class="shop-btn">Shop Now</button>
      </div>
    </div>
  </div>
</div>

<div id="social-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('social-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Frankie's Socials</div>
  </div>
  <div class="window-content">
    <div class="social-grid">
      <a href="https://instagram.com/frankieventermusic" target="_blank" class="social-card" rel="noopener">
        <div class="social-icon-big" style="background-image:url('https://www.dropbox.com/scl/fi/ydjexhmo7bzpefle21734/fc55f708c8d651c923055ab1a1d749be.jpg?rlkey=healak5anf4t66tn4msu6qjnz&st=i6oaa054&raw=1');background-size:cover;background-position:center;"></div>
        <div class="social-name" >Instagram</div>
        <div class="social-handle">@frankieventermusic</div>
        <div class="social-btn">Open</div>
      </a>
      <a href="https://open.spotify.com/artist/4OpEtCxKCkuq7XqJ18zVYn?si=k9NxL5NGSNud1M53hMcxmg" target="_blank" class="social-card" rel="noopener">
        <div class="social-icon-big" style="background-image:url('https://png.pngtree.com/element_our/png/20181011/spotify-social-media-icon-design-template-vector-png_127005.jpg');background-size:cover;background-position:center;"></div>
        <div class="social-name">Spotify</div>
        <div class="social-handle">Artist Page</div>
        <div class="social-btn">Open</div>
      </a>
      <a href="http://youtube.com/@frankieventermusic" target="_blank" class="social-card" rel="noopener">
        <div class="social-icon-big" style="background-image:url('https://static.vecteezy.com/system/resources/previews/023/986/704/non_2x/youtube-logo-youtube-logo-transparent-youtube-icon-transparent-free-free-png.png');background-size:cover;background-position:center;"></div>
        <div class="social-name">YouTube</div>
        <div class="social-handle">@frankieventermusic</div>
        <div class="social-btn">Open</div>
      </a>
      <a href="https://www.facebook.com/frankiesingingxx" target="_blank" class="social-card" rel="noopener">
        <div class="social-icon-big" style="background-image:url('https://www.citypng.com/public/uploads/preview/blue-square-form-contains-outline-fb-facebook-logo-701751694792360h0fcgk1pal.png');background-size:cover;background-position:center;"></div>
        <div class="social-name">Facebook</div>
        <div class="social-handle">@frankiesingingxx</div>
        <div class="social-btn">Open</div>
      </a>
      <a href="http://tiktok.com/@frankieventermusic" target="_blank" class="social-card" rel="noopener">
        <div class="social-icon-big" style="background-image:url('https://images.seeklogo.com/logo-png/34/1/tiktok-logo-png_seeklogo-340606.png');background-size:cover;background-position:center;"></div>
        <div class="social-name">TikTok</div>
        <div class="social-handle">@frankieventermusic</div>
        <div class="social-btn">Open</div>
      </a>
    </div>
  </div>
</div>

<!-- To-Do App Window -->
<div id="todo-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('todo-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">To-Do</div>
  </div>
  <div class="window-content" style="align-items:center; justify-content:center;">
    <div id="todoContainer" class="todo-wrap">
      <div class="todo-header">
        <div style="font-size:18px; font-weight:700; color:#222;">Frankie's To-Do</div>
        <div id="todoSummary" style="font-size:12px; color:#666;">0/0 done</div>
      </div>
      <div class="todo-progress"><span id="todoProgress"></span></div>
      <ul id="todoList" class="todo-list"></ul>
    </div>
  </div>
  <style>
    /* moved to global redesigned styles */
  </style>
</div>

<!-- Settings App Window -->
<div id="settings-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('settings-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Settings</div>
    <button class="sidebar-toggle" onclick="toggleSidebar('settings-window')">‚ò∞ Sidebar</button>
  </div>
  <div class="window-content">
    <div class="split-view">
      <div class="sidebar" id="settingsList"></div>
      <div class="main-content" id="settingsContent"></div>
    </div>
  </div>
  <style>
    .setting-row { display:flex; align-items:center; justify-content:space-between; padding:12px 0; border-bottom:1px solid rgba(0,0,0,0.06); }
    .setting-name { font-size:14px; color:#222; }
    .switch { position:relative; width:46px; height:26px; background:rgba(0,0,0,0.15); border-radius:999px; transition:background .2s ease; cursor:pointer; }
    .switch input { display:none; }
    .switch .thumb { position:absolute; top:3px; left:3px; width:20px; height:20px; border-radius:50%; background:#fff; box-shadow:0 2px 8px rgba(0,0,0,.25); transition:left .2s ease; }
    .switch input:checked + .thumb { left:23px; }
    .switch input:checked ~ .track { background:#27c93f; }
    .settings-note { font-size:12px; color:#666; margin-top:12px; }
    .settings-group { margin-bottom:16px; }
    .settings-group h3 { margin:0 0 8px; font-size:16px; color:#222; }
    .settings-btn { padding:8px 12px; border-radius:8px; border:1px solid rgba(0,0,0,0.1); background:#f5f5f7; color:#222; font-weight:600; cursor:pointer; }
  </style>
</div>

<div id="tour-window" class="window">
  <div class="window-header">
    <div class="dots">
      <div class="dot close" onclick="closeWindow('tour-window')"></div>
      <div class="dot min"></div>
      <div class="dot max"></div>
    </div>
    <div class="window-title">Tour</div>
  </div>
  <div class="window-content">
    <div class="tour-container">
      <div class="coming-soon">
        <h1>404 Not Found!</h1>
        <p class="error-code">Coming Soon...</p>
        <p class="description">Join the waitlist to stay updated!</p>
        <div class="waitlist-form">
          <input type="email" id="tourEmail" placeholder="Enter your email" class="email-input">
          <button onclick="joinWaitlist()" class="waitlist-btn">Join Waitlist</button>
        </div>
        <p class="form-note" id="formMessage"></p>
      </div>
    </div>
  </div>
</div>

<div id="imageModal" class="modal">
  <span class="modal-close" onclick="closeModal()">√ó</span>
  <div class="modal-content">
    <span class="nav-btn prev" onclick="changeImage(-1)">‚Äπ</span>
    <div style="display:flex; flex-direction:column; align-items:center; gap:10px;">
      <img id="modalImg" class="modal-img">
      <div id="modalCaption" style="color:#fff; font-size:12px; text-align:center; opacity:.9;"></div>
    </div>
    <span class="nav-btn next" onclick="changeImage(1)">‚Ä∫</span>
  </div>
</div>

<!-- Video Modal -->
<div id="videoModal" class="modal">
  <span class="modal-close" onclick="closeVideoModal()">√ó</span>
  <div class="modal-content">
    <iframe id="videoIframe" title="Video" style="width:80vw;height:45vw;max-width:900px;max-height:506px;border:none;border-radius:10px;"></iframe>
  </div>
  
  
</div>

<script>
const photos = [
  { src: "https://www.dropbox.com/scl/fi/gm1a6kbul7sculre1fxee/FV-PRESS-IMAGE-1.jpg?rlkey=3a38td6eq56jda3q73750oynv&st=uw9eil5f&raw=1", title:"Press Image 1", album:"press", date:"2024-08-01", tags:["press","portrait"] },
  { src: "https://www.dropbox.com/scl/fi/kxr51rx8mowaxexl23eqc/FV-PRESS-IMAGE-2.jpg?rlkey=wc2sh3bbzpeychrfpglp12pv1&st=4m1yzyzm&raw=1", title:"Press Image 2", album:"press", date:"2024-08-02", tags:["press","portrait"] },
  { src: "https://www.dropbox.com/scl/fi/hl6i1mjlvrzeyk7mql15v/FV-PRESS-IMAGE-3.JPG?rlkey=uhf4xtyw8abc3wimmcwzjv62x&st=rfe3otok&raw=1", title:"Studio Session", album:"studio", date:"2024-08-10", tags:["studio","bts"] },
  { src: "https://www.dropbox.com/scl/fi/sjjarijq46b8ju1mksm2o/FV-PRESS-IMAGE-4.JPG?rlkey=bqs6ur6f9loulaj0tk6fni3bk&st=try8pq1v&raw=1", title:"Live Show", album:"travel", date:"2024-09-01", tags:["live","travel"] },
  { src: "https://www.dropbox.com/scl/fi/or7ugi1hykukdwdorl933/FV-PRESS-IMAGE-5.JPG?rlkey=wme7basatxkjfkrlmcrsd4xsy&st=3iuzdkj7&raw=1", title:"Backstage", album:"studio", date:"2024-09-05", tags:["studio","bts"] },
  { src: "https://www.dropbox.com/scl/fi/zwv1cu8ofa6upmsh3km49/FV-PRESS-IMAGE-1-EDIT.png?rlkey=xxn6iwwkhumimsov06v4hs2c0&st=2mv5nizc&raw=1", title:"Poster Edit", album:"press", date:"2024-09-12", tags:["press","edit"] }
];

let currentIndex = 0;
let visiblePhotos = photos.slice();
let galleryFilter = 'all';
let galleryQuery = '';
let gallerySort = 'newest';

function openWindow(windowId) {
  const target = document.getElementById(windowId);
  if(!target){ console.warn('Window not found:', windowId); return; }
  // Show target window
  target.style.display = 'flex';
  target.classList.add('active');
  // Center on open
  try {
    const vw = window.innerWidth; const vh = window.innerHeight;
    const rect = target.getBoundingClientRect();
    const w = rect.width || parseFloat(target.style.width)||600;
    const h = rect.height || parseFloat(target.style.height)||400;
    target.style.transform = 'none';
    if(vw <= 480){
      target.style.left = '0px';
      target.style.top = '32px';
      target.style.right = '0px';
      target.style.bottom = '0px';
      target.style.width = '100vw';
      target.style.height = 'calc(100vh - 32px)';
      target.dataset.maximized = 'true';
    } else {
      target.style.left = Math.max(8, (vw - w)/2) + 'px';
      target.style.top = Math.max(8, (vh - h)/2) + 'px';
      target.style.right = 'auto';
      target.style.bottom = 'auto';
      target.dataset.maximized = 'false';
    }
  } catch(_) {}
  // Animate open
  try {
    target.classList.add('anim-open');
    target.addEventListener('animationend', () => target.classList.remove('anim-open'), { once:true });
  } catch(_){}
  // Bring to front
  try {
    window.__winZ = (window.__winZ || 100) + 1;
    target.style.zIndex = window.__winZ;
    document.querySelectorAll('.window').forEach(w => w.classList.remove('focused'));
    target.classList.add('focused');
  } catch(_){ }
  // App-specific init
  if(windowId === 'notes-window') loadNotes();
  if(windowId === 'credits-window') loadCredits();
  if(windowId === 'gallery-window') loadGallery();
  if(windowId === 'videos-window') loadVideos();
  if(windowId === 'lyrics-window') loadLyrics();
  if(windowId === 'music-window') initMusic();
  if(windowId === 'settings-window') initSettings();
  if(windowId === 'todo-window') initTodo();
  if(windowId === 'letters-window') {
    initLetters();
    const thanks = document.getElementById('lettersThanks');
    const form = document.getElementById('lettersForm');
    if(thanks) thanks.style.display = 'none';
    if(form && form.reset) form.reset();
  }
  if(windowId === 'game-window') {
    // Land on the Games menu; game loops start when a view is opened
    showGamesMenu();
  }
}

// Close Apple menu then open Settings, ensuring focus
function openSettingsFromMenu(){
  try {
    const dd = document.getElementById('appleDropdown');
    if(dd) dd.style.display = 'none';
    openWindow('settings-window');
  } catch(_) {}
}

// Close Apple menu, then perform logout and restore gate
function logoutFromMenu(){
  try {
    const dd = document.getElementById('appleDropdown');
    if(dd) dd.style.display = 'none';
    try { sessionStorage.removeItem('fv_auth'); } catch(_){}
    window.ENABLE_GATE = true;
    document.querySelectorAll('.window').forEach(w => { w.style.display = 'none'; w.classList.remove('active'); });
    document.body.classList.remove('desktop-ready');
    // Show login overlay immediately as a fallback
    const login = document.getElementById('loginOverlay');
    if(login) login.style.display = 'flex';
    initGate();
  } catch(_) {}
}

// Expose UI actions globally for inline handlers
try {
  window.openWindow = openWindow;
  window.showGamesMenu = typeof showGamesMenu === 'function' ? showGamesMenu : window.showGamesMenu;
  window.showPongView = typeof showPongView === 'function' ? showPongView : window.showPongView;
} catch(_) {}
function toggleSidebar(windowId){
  const win = document.getElementById(windowId);
  if(!win) return;
  const sidebar = win.querySelector('.sidebar');
  if(sidebar){ sidebar.classList.toggle('collapsed'); }
}

function initMusic(){
  const iframe = document.getElementById('disco-playlist-27299296');
  const fb = document.getElementById('musicFallback');
  if(!iframe || !fb) return;
  fb.style.display = 'none';
  let loaded = false;
  iframe.onload = ()=>{ loaded = true; fb.style.display = 'none'; };
  setTimeout(()=>{ if(!loaded) fb.style.display = 'block'; }, 2500);
}

function openLink(url){
  try { window.open(url, '_blank', 'noopener'); }
  catch(e) { location.href = url; }
}

// ===== ICON RIPPLE =====
function initIconRipple(){
  document.querySelectorAll('.icon').forEach(icon => {
    icon.addEventListener('click', (e) => {
      const img = icon.querySelector('.icon-img');
      if(!img) return;
      const rect = img.getBoundingClientRect();
      const x = (e.clientX || (e.touches && e.touches[0].clientX) || rect.width/2) - rect.left;
      const y = (e.clientY || (e.touches && e.touches[0].clientY) || rect.height/2) - rect.top;
      const ripple = document.createElement('span');
      ripple.className = 'ripple';
      ripple.style.width = '24px';
      ripple.style.height = '24px';
      ripple.style.left = (x - 12) + 'px';
      ripple.style.top = (y - 12) + 'px';
      img.appendChild(ripple);
      ripple.addEventListener('animationend', () => { try { ripple.remove(); } catch(_){} }, { once:true });
    });
  });
}

// ===== ASSET PRELOAD + LOADING OVERLAY =====
async function preloadAssets(){
  // Base assets
  const base = [
    'https://www.dropbox.com/scl/fi/jaro7tf2paxju5t9lnflp/747.png?rlkey=akamxf9owvejo8yoj51302xi5&st=8v9mwutn&raw=1',
    'https://www.dropbox.com/scl/fi/ydjexhmo7bzpefle21734/fc55f708c8d651c923055ab1a1d749be.jpg?rlkey=healak5anf4t66tn4msu6qjnz&st=i6oaa054&raw=1',
    'https://www.newzealand.com/assets/Tourism-NZ/Auckland/235640-auckland-city-auckland-web-2560__aWxvdmVrZWxseQo_FocalPointCropWzM1MiwxMDI0LDUwLDUwLDc1LCJqcGciLDY1LDIuNV0.jpg'
  ];
  // Photo sources
  const photoSrcs = (Array.isArray(photos) ? photos.map(p => typeof p === 'string' ? p : p.src).filter(Boolean) : []);
  // Icon backgrounds from DOM (home icons + social icons)
  const bgEls = document.querySelectorAll('.icon-img, .social-icon-big');
  const socialBg = Array.from(bgEls)
    .map(el => {
      const bg = (el.style && el.style.backgroundImage) || '';
      const m = bg.match(/url\(("|')?(.*?)("|')?\)/);
      return m && m[2] ? m[2] : null;
    })
    .filter(Boolean);
  const list = [...base, ...photoSrcs, ...socialBg];
  const unique = Array.from(new Set(list.filter(Boolean)));
  let loaded = 0;
  const total = unique.length;
  function updateProgress(){
    const bar = document.getElementById('bootBar');
    const text = document.getElementById('bootText');
    if(bar){ bar.style.width = Math.round((loaded/total)*100) + '%'; }
    if(text){ text.textContent = `Starting up‚Ä¶ ${Math.round((loaded/total)*100)}%`; }
  }
  updateProgress();
  await Promise.allSettled(unique.map(src => new Promise((resolve) => {
    try {
      const img = new Image();
      img.onload = () => { loaded++; updateProgress(); resolve(true); };
      img.onerror = () => { loaded++; updateProgress(); resolve(false); };
      img.src = src;
    } catch(_) { loaded++; updateProgress(); resolve(false); }
  })));
}

function closeWindow(id) {
  const win = document.getElementById(id);
  if(!win) return;
  // Animate close then hide
  try {
    win.classList.add('anim-close');
    win.addEventListener('animationend', () => {
      win.style.display = 'none';
      win.classList.remove('active');
      win.classList.remove('anim-close');
    }, { once:true });
  } catch(_){
    win.style.display = 'none';
    win.classList.remove('active');
  }
}

// ===== DRAG & RESIZE WINDOWS =====
function initWindowInteractions(){
  const wins = Array.from(document.querySelectorAll('.window'));
  const vw = ()=> window.innerWidth;
  const vh = ()=> window.innerHeight;
  wins.forEach(win => {
    // Append resize handle if missing
    if(!win.querySelector('.resize-handle')){
      const h = document.createElement('div');
      h.className = 'resize-handle';
      win.appendChild(h);
    }
    // Prepare for drag: ensure absolute position using left/top
    function center(){
      const rect = win.getBoundingClientRect();
      const w = rect.width || 600, h = rect.height || 400;
      win.style.transform = 'none';
      if(vw() <= 480){
        win.style.left = '0px';
        win.style.top = '32px';
        win.style.right = '0px';
        win.style.bottom = '0px';
        win.style.width = '100vw';
        win.style.height = 'calc(100vh - 32px)';
      } else {
        win.style.left = Math.max(8, (vw() - w)/2) + 'px';
        win.style.top = Math.max(8, (vh() - h)/2) + 'px';
        win.style.right = 'auto';
        win.style.bottom = 'auto';
      }
    }
    center();

    const header = win.querySelector('.window-header');
    let dragging = false, dx = 0, dy = 0;
    function onDown(e){
      dragging = true;
      const rect = win.getBoundingClientRect();
      dx = (e.clientX || (e.touches&&e.touches[0].clientX)) - rect.left;
      dy = (e.clientY || (e.touches&&e.touches[0].clientY)) - rect.top;
      try {
        window.__winZ = (window.__winZ || 100) + 1;
        win.style.zIndex = window.__winZ;
        document.querySelectorAll('.window').forEach(w => w.classList.remove('focused'));
        win.classList.add('focused');
      } catch(_){}
      document.addEventListener('mousemove', onMove);
      document.addEventListener('mouseup', onUp);
      document.addEventListener('touchmove', onMove, { passive:false });
      document.addEventListener('touchend', onUp);
    }
    function onMove(e){
      if(!dragging) return;
      const x = (e.clientX || (e.touches&&e.touches[0].clientX)) - dx;
      const y = (e.clientY || (e.touches&&e.touches[0].clientY)) - dy;
      const rect = win.getBoundingClientRect();
      const w = rect.width, h = rect.height;
      const nx = Math.min(vw()-w-8, Math.max(8, x));
      const ny = Math.min(vh()-h-8, Math.max(8, y));
      win.style.left = nx + 'px';
      win.style.top = ny + 'px';
      e.preventDefault && e.preventDefault();
    }
    function onUp(){
      dragging = false;
      document.removeEventListener('mousemove', onMove);
      document.removeEventListener('mouseup', onUp);
      document.removeEventListener('touchmove', onMove);
      document.removeEventListener('touchend', onUp);
    }
    if(header){
      const isMobile = vw() <= 640;
      if(!isMobile){
        header.addEventListener('mousedown', onDown);
        header.addEventListener('touchstart', onDown, { passive:false });
        header.addEventListener('dblclick', () => toggleMaximize(win, vw(), vh()));
      }
    }

    // Wire toolbar buttons: minimize (yellow) and maximize (green)
    const minBtn = win.querySelector('.min');
    const maxBtn = win.querySelector('.max');
    if(minBtn){ minBtn.addEventListener('click', () => minimizeWindow(win)); }
    if(maxBtn){ maxBtn.addEventListener('click', () => toggleMaximize(win, vw(), vh())); }

    // Resize
    const handle = win.querySelector('.resize-handle');
    let resizing = false, sx = 0, sy = 0, sw = 0, sh = 0;
    function onRDown(e){
      const pt = e.touches ? e.touches[0] : e;
      resizing = true; sx = pt.clientX; sy = pt.clientY;
      const rect = win.getBoundingClientRect(); sw = rect.width; sh = rect.height;
      document.addEventListener('mousemove', onRMove);
      document.addEventListener('mouseup', onRUp);
      document.addEventListener('touchmove', onRMove, { passive:false });
      document.addEventListener('touchend', onRUp);
      e.preventDefault && e.preventDefault();
    }
    function onRMove(e){
      if(!resizing) return;
      const pt = e.touches ? e.touches[0] : e;
      const dw = (pt.clientX - sx);
      const dh = (pt.clientY - sy);
      const newW = Math.min(vw()-parseFloat(win.style.left||'0')-8, Math.max(320, sw + dw));
      const newH = Math.min(vh()-parseFloat(win.style.top||'0')-8, Math.max(240, sh + dh));
      win.style.width = newW + 'px';
      win.style.height = newH + 'px';
      e.preventDefault && e.preventDefault();
    }
    function onRUp(){
      resizing = false;
      document.removeEventListener('mousemove', onRMove);
      document.removeEventListener('mouseup', onRUp);
      document.removeEventListener('touchmove', onRMove);
      document.removeEventListener('touchend', onRUp);
    }
    if(handle && vw() > 480){ handle.addEventListener('mousedown', onRDown); handle.addEventListener('touchstart', onRDown, { passive:false }); }
  });
}

// ===== MINIMIZE / MAXIMIZE HELPERS =====
function ensureDock(){
  let dock = document.getElementById('windowDock');
  if(!dock){
    dock = document.createElement('div');
    dock.id = 'windowDock';
    dock.style.position = 'fixed';
    dock.style.bottom = '36px';
    dock.style.left = '16px';
    dock.style.display = 'flex';
    dock.style.gap = '8px';
    dock.style.zIndex = '10001';
    dock.style.backdropFilter = 'blur(12px)';
    dock.style.background = 'rgba(255,255,255,.85)';
    dock.style.border = '1px solid rgba(0,0,0,.08)';
    dock.style.borderRadius = '10px';
    dock.style.padding = '8px 10px';
    dock.style.boxShadow = '0 10px 24px rgba(0,0,0,.18)';
    document.body.appendChild(dock);
  }
  return dock;
}

function addDockItem(win){
  const dock = ensureDock();
  const title = win.querySelector('.window-title')?.textContent || 'App';
  const btn = document.createElement('button');
  btn.textContent = title;
  btn.className = 'dock-btn';
  btn.dataset.windowId = win.id;
  btn.addEventListener('click', () => {
    restoreWindow(win);
    btn.remove();
  });
  dock.appendChild(btn);
}

// ===== PARALLAX WALLPAPER =====
function initParallax(){
  const bg = document.getElementById('parallaxBg');
  if(!bg) return;
  let raf = null;
  let targetX = 0, targetY = 0;
  function animate(){
    const dx = targetX * 0.06;
    const dy = targetY * 0.06;
    bg.style.transform = `translate3d(${dx}px, ${dy}px, 0) scale(1.06)`;
    raf = null;
  }
  function onMove(e){
    const cx = (e.clientX || window.innerWidth/2) / window.innerWidth;
    const cy = (e.clientY || window.innerHeight/2) / window.innerHeight;
    targetX = (cx - 0.5) * 24; // max 24px offset
    targetY = (cy - 0.5) * 18;
    if(!raf) raf = requestAnimationFrame(animate);
  }
  window.addEventListener('mousemove', onMove);
}

function minimizeWindow(win){
  addDockItem(win);
  win.classList.add('minimizing');
  setTimeout(() => {
    win.style.display = 'none';
    win.classList.remove('active');
    win.classList.remove('minimizing');
  }, 180);
}

function toggleMaximize(win, viewportW, viewportH){
  const isMax = win.dataset.maximized === 'true';
  if(!isMax){
    const rect = win.getBoundingClientRect();
    win.dataset.prevLeft = win.style.left || rect.left + 'px';
    win.dataset.prevTop = win.style.top || rect.top + 'px';
    win.dataset.prevWidth = win.style.width || rect.width + 'px';
    win.dataset.prevHeight = win.style.height || rect.height + 'px';
    win.style.transform = 'none';
    win.style.left = '8px';
    win.style.top = '36px';
    win.style.right = 'auto';
    win.style.bottom = 'auto';
    win.style.width = Math.max(320, viewportW - 16) + 'px';
    win.style.height = Math.max(240, viewportH - 52) + 'px';
    win.dataset.maximized = 'true';
    try {
      win.classList.add('win-bounce');
      win.addEventListener('animationend', () => win.classList.remove('win-bounce'), { once:true });
    } catch(_){}
  } else {
    win.style.left = win.dataset.prevLeft || win.style.left;
    win.style.top = win.dataset.prevTop || win.style.top;
    win.style.width = win.dataset.prevWidth || win.style.width;
    win.style.height = win.dataset.prevHeight || win.style.height;
    win.dataset.maximized = 'false';
  }
}

function restoreWindow(win){
  win.style.display = 'flex';
  win.classList.add('active');
  try { window.__winZ = (window.__winZ || 100) + 1; win.style.zIndex = window.__winZ; document.querySelectorAll('.window').forEach(w => w.classList.remove('focused')); win.classList.add('focused'); } catch(_){}
}

// ===== ENTRY PASSWORD GATE =====
function initGate(){
  if (window.ENABLE_GATE === false) return;
  try {
    const overlay = document.getElementById('loginOverlay');
    const input = document.getElementById('gatePassword');
    const btn = document.getElementById('gateSubmit');
    const status = document.getElementById('gateStatus');
    if(!overlay || !input || !btn) return;
    overlay.style.display = 'flex';
    try { overlay.classList.add('login-enter'); } catch(_){}
    async function attempt(){
      const pw = input.value.trim();
      status.textContent = '';
      btn.disabled = true; btn.textContent = 'Checking‚Ä¶';
      try {
        const res = await fetch('/api/check-password', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ password: pw })
        });
        if(res.ok){
          sessionStorage.setItem('fv_auth', 'true');
          if(overlay){
            overlay.classList.add('login-exit');
            overlay.addEventListener('animationend', () => {
              overlay.style.display = 'none';
              document.body.classList.add('desktop-ready');
            }, { once: true });
          } else {
            document.body.classList.add('desktop-ready');
          }
        } else {
          // Provide clearer feedback based on status code
          if(res.status === 401){
            status.textContent = 'Incorrect password';
          } else if(res.status === 500){
            status.textContent = 'Server not configured. Please set ENTRY_PASSWORD.';
          } else if(res.status === 405){
            status.textContent = 'Method not allowed. Check API route.';
          } else {
            status.textContent = 'Error signing in. Please try again.';
          }
        }
      } catch(e){ status.textContent = 'Connection error'; }
      btn.disabled = false; btn.textContent = 'Sign In';
    }
    btn.addEventListener('click', attempt);
    input.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') attempt(); });
  } catch(e) { console.warn('Gate init error', e); }
}

// ===== Settings App =====
const settingsSections = ['General','Appearance','Account','Legal','About'];
function initSettings(){
  const list = document.getElementById('settingsList');
  const content = document.getElementById('settingsContent');
  if(!list || !content) return;
  if(list.children.length) return;
  settingsSections.forEach((name, i) => {
    const item = document.createElement('div');
    item.className = 'sidebar-item' + (i===0 ? ' active' : '');
    item.textContent = name;
    item.onclick = () => selectSettings(name);
    list.appendChild(item);
  });
  selectSettings('General');
}

function selectSettings(name){
  document.querySelectorAll('#settingsList .sidebar-item').forEach(el => {
    el.classList.toggle('active', el.textContent === name);
  });
  renderSettings(name);
}

function renderSettings(section){
  const content = document.getElementById('settingsContent');
  if(!content) return;
  if(section === 'General'){
    content.innerHTML = `
      <div class="settings-group">
        <h3>General</h3>
        <div class="setting-row" style="justify-content:flex-start; gap:12px;">
          <button id="signOutBtn" class="settings-btn">Sign Out</button>
        </div>
      </div>
    `;
    const signOut = document.getElementById('signOutBtn');
    if(signOut){
      signOut.addEventListener('click', () => {
        try { sessionStorage.removeItem('fv_auth'); } catch(_){ }
        initGate();
      });
    }
    return;
  }
  if(section === 'Appearance'){
    content.innerHTML = `
      <div class="settings-group">
        <h3>Appearance</h3>
        <div class="setting-row">
          <div class="setting-name">Reduce Motion</div>
          <label class="switch">
            <input id="toggleMotion" type="checkbox" ${localStorage.getItem('fv_reduce_motion')==='true' ? 'checked' : ''}>
            <span class="thumb"></span>
          </label>
        </div>
        <div class="settings-note">Disables some transitions and animations.</div>
      </div>
    `;
    const motion = document.getElementById('toggleMotion');
    if(motion){
      motion.addEventListener('change', () => {
        localStorage.setItem('fv_reduce_motion', motion.checked ? 'true' : 'false');
        document.body.classList.toggle('reduce-motion', motion.checked);
      });
    }
    return;
  }
  if(section === 'Account'){
    content.innerHTML = `
      <div class="settings-group">
        <h3>Account</h3>
        <div class="setting-row">
          <div class="setting-name">Username</div>
          <div style="font-weight:600;">@frankieventer</div>
        </div>
        <div class="setting-row">
          <div class="setting-name">Device Name</div>
          <div style="font-weight:600;">Frankie's Laptop</div>
        </div>
        <div class="setting-row">
          <div class="setting-name">OS</div>
          <div style="font-weight:600;">FrankieOS</div>
        </div>
        <div class="setting-row">
          <div class="setting-name">Build</div>
          <div style="font-weight:600;">V13.2</div>
        </div>
        <div class="setting-row" style="justify-content:flex-start; gap:12px;">
          <button id="signOutBtn2" class="settings-btn">Sign Out</button>
        </div>
      </div>
    `;
    const signOut2 = document.getElementById('signOutBtn2');
    if(signOut2){
      signOut2.addEventListener('click', () => {
        try { sessionStorage.removeItem('fv_auth'); } catch(_){ }
        initGate();
      });
    }
    return;
  }
  if(section === 'Legal'){
    content.innerHTML = `
      <div class="settings-group">
        <h3>Legal</h3>
        <div class="setting-row" style="justify-content:flex-start; gap:12px;">
          <a href="terms.html" class="settings-btn" target="_blank" rel="noopener">Terms of Service</a>
          <a href="privacy.html" class="settings-btn" target="_blank" rel="noopener">Privacy Policy</a>
        </div>
        <div class="settings-note">These documents describe how this site operates and how we handle your data.</div>
      </div>
    `;
    return;
  }
  if(section === 'About'){
    content.innerHTML = `
      <div class="settings-group">
        <h3>About</h3>
        <div class="settings-note">¬© 2026 Frankie Venter, under exclusive licence to Five AM.</div>
        <div class="settings-note">Built by Five AM for Frankie Venter.</div>
      </div>
    `;
    return;
  }
}

// ===== GAMES NAV =====
function showGamesMenu(){
  // Stop running games if needed
  try{ if(window.stopPong) window.stopPong(); }catch(_){ }
  const menu = document.getElementById('gamesMenu');
  const pong = document.getElementById('pongView');
  if(menu) menu.style.display = 'flex';
  if(pong) pong.style.display = 'none';
}
function showPongView(){
  const menu = document.getElementById('gamesMenu');
  const pong = document.getElementById('pongView');
  if(menu) menu.style.display = 'none';
  if(pong) { pong.style.display = 'flex'; initPong(); }
}

 

function loadGallery(){
  const grid = document.getElementById("photoGrid");
  if(!grid) return;
  grid.innerHTML = "";
  visiblePhotos = photos.slice();
  visiblePhotos.forEach((p,i)=>{
    const item = document.createElement("div");
    item.className = "masonry-item";
    item.innerHTML = `<img src="${p.src}" alt="${p.title || 'Photo'}" decoding="async"/><div class='overlay'>${p.title || ''}</div>`;
    item.onclick = ()=>openModal(i);
    grid.appendChild(item);
  });
  if(!grid.children.length){
    const msg = document.createElement('div');
    msg.style.color = '#666';
    msg.style.textAlign = 'center';
    msg.style.padding = '20px';
    msg.textContent = 'No photos available.';
    grid.appendChild(msg);
  }
}

function openModal(i){
  currentIndex=i;
  const img = document.getElementById("modalImg");
  const modal = document.getElementById("imageModal");
  const p = visiblePhotos[i];
  img.src=p.src;
  const cap = document.getElementById('modalCaption');
  if(cap){ cap.textContent = [p.title, p.album && p.album.toUpperCase(), p.date].filter(Boolean).join(' ‚Ä¢ '); }
  modal.style.display="flex";
}

function closeModal(){
  document.getElementById("imageModal").style.display="none";
}

function changeImage(dir){
  if(!visiblePhotos.length) return;
  currentIndex=(currentIndex+dir+visiblePhotos.length)%visiblePhotos.length;
  const img = document.getElementById("modalImg");
  const cap = document.getElementById('modalCaption');
  const p = visiblePhotos[currentIndex];
  img.src=p.src;
  if(cap){ cap.textContent = [p.title, p.album && p.album.toUpperCase(), p.date].filter(Boolean).join(' ‚Ä¢ '); }
}

function updateClock(){
  const el = document.getElementById('clock');
  if(!el) return;
  const now = new Date();
  el.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
}

// ===== MENU DROPDOWN & LOGOUT =====
function initMenuDropdown(){
  const btn = document.getElementById('appleMenuButton');
  const dd = document.getElementById('appleDropdown');
  const logoutItem = document.getElementById('logoutMenuItem');
  const settingsItem = document.getElementById('settingsMenuItem');
  if(!btn || !dd) return;
  btn.addEventListener('click', (e) => {
    e.stopPropagation();
    const willShow = dd.style.display !== 'block';
    dd.style.display = willShow ? 'block' : 'none';
    if(willShow){
      dd.classList.add('anim-menu-in');
      dd.addEventListener('animationend', () => dd.classList.remove('anim-menu-in'), { once:true });
    }
  });
  dd.addEventListener('click', (e) => e.stopPropagation());
  document.addEventListener('click', () => { dd.style.display = 'none'; });
  if(settingsItem){ settingsItem.addEventListener('click', () => { openSettingsFromMenu(); }); }
  if(logoutItem){ logoutItem.addEventListener('click', () => { logoutFromMenu(); }); }
}
const notes = [
  {title: "a big deal to me", content: "Started this in the late hours when the city goes quiet. The synth layers came naturally - I wanted that dreamy, ethereal feeling. Three weeks of production, endless coffee breaks, and finally found the perfect vocal tone. This track captures exactly what I was feeling at that moment. Pure creativity flowing through the speakers."},
  {title: "turn me down", content: "Started this in the late hours when the city goes quiet. The synth layers came naturally - I wanted that dreamy, ethereal feeling. Three weeks of production, endless coffee breaks, and finally found the perfect vocal tone. This track captures exactly what I was feeling at that moment. Pure creativity flowing through the speakers."},
  {title: "hint", content: "Had this vision of neon lights reflecting off wet streets at 3am. The energy is different, more upbeat and raw. Working with the Five AM team pushed me creatively - we tried things I'd never done before. The drums were the last piece we locked in, and when they clicked, everything else fell into place perfectly."},
  {title: "she's leaving", content: "This one's close to my heart. It's about hope after darkness, new beginnings, personal growth. The melody builds like a sunrise - slow at first, then explosive. I wrote the lyrics in one sitting, everything just poured out. This represents where I'm heading with my music and my life."},
  {title: "how you like me now", content: "Collaborated with some seriously talented artists on this track. The energy was insane in the studio. We brought together different styles and it somehow just worked. Multiple takes, lots of experimentation, and a final result that surprised even us. This is what happens when creative minds collide."},
  {title: "just want you here", content: "This one's close to my heart. It's about hope after darkness, new beginnings, personal growth. The melody builds like a sunrise - slow at first, then explosive. I wrote the lyrics in one sitting, everything just poured out. This represents where I'm heading with my music and my life."},
  {title: "selfish", content: "This one's close to my heart. It's about hope after darkness, new beginnings, personal growth. The melody builds like a sunrise - slow at first, then explosive. I wrote the lyrics in one sitting, everything just poured out. This represents where I'm heading with my music and my life."},
  {title: "paris", content: "This one's close to my heart. It's about hope after darkness, new beginnings, personal growth. The melody builds like a sunrise - slow at first, then explosive. I wrote the lyrics in one sitting, everything just poured out. This represents where I'm heading with my music and my life."},
  {title: "real to me", content: "This one's close to my heart. It's about hope after darkness, new beginnings, personal growth. The melody builds like a sunrise - slow at first, then explosive. I wrote the lyrics in one sitting, everything just poured out. This represents where I'm heading with my music and my life."},
];

let currentNote = 0;

function loadNotes() {
  const sidebar = document.getElementById("notesList");
  if(sidebar.children.length) return;
  
  notes.forEach((note, i) => {
    const div = document.createElement("div");
    div.className = "sidebar-item" + (i === 0 ? " active" : "");
    div.textContent = note.title;
    div.onclick = () => selectNote(i);
    sidebar.appendChild(div);
  });
  
  selectNote(0);
}

function selectNote(i) {
  currentNote = i;
  document.querySelectorAll("#notesList .sidebar-item").forEach((el, idx) => {
    el.classList.toggle("active", idx === i);
  });
  document.getElementById("noteContent").innerHTML = `<h2>${notes[i].title}</h2><p>${notes[i].content}</p>`;
}

// ===== CREDITS (list: project + tracks) =====
const creditsListData = [
  {
    title: '<b>a big deal to me</b>',
    content: `
      <div style="margin-bottom:18px;">
        <div style="font-weight:700; font-size:18px; margin-bottom:6px;">Visual Team</div>
        <div style="line-height:1.8; font-size:14px; color:#222;">
          <b>Artwork Photographer:</b> Apela Bell<br>
          <b>Press Photos:</b> Apela Bell, Taine Noble, Te Ngariki Kokiri<br>
          <b>Vinyl Creative Design:</b> Frankie Venter, Jade Johnson<br>
          <b>Single Artworks:</b> Riley Cough<br>
          <b>Social Content:</b> Taine Noble, Jade Johnson<br>
          <b>Visualisers & Music Videos:</b> Taine Noble<br>
          <b>Touring Content:</b> Taine Noble
        </div>
      </div>
      <div style="margin-bottom:18px;">
        <div style="font-weight:700; font-size:18px; margin-bottom:6px;">Label & Distribution Team</div>
        <div style="line-height:1.8; font-size:14px; color:#222;">
          <b>Executive Producer:</b> Rory Noble<br>
          <b>Project Management:</b> Rory Noble, Nate Brown<br>
          <b>Label Representative:</b> Nate Brown<br>
          <b>Label Assist:</b> Jade Johnson<br>
          <b>Delivery Manager:</b> Nate Brown<br>
          <b>Management:</b> Jade Johnson<br>
          <b>Touring:</b> Henare ‚ÄúH‚Äù Kaa<br>
          <b>Tracklist Curation:</b> Jamie Boyo<br>
          <b>Vinyl Mastering:</b> Jamie Boyo
        </div>
      </div>
      <div style="margin-bottom:18px;">
        <div style="font-weight:700; font-size:18px; margin-bottom:6px;">Special Thanks</div>
        <div style="line-height:1.8; font-size:14px; color:#222;">
          Mandie Skerrett, Mark Venter, Cooper Venter, Jet Venter, Liam ‚ÄúBeans‚Äù Beasley, Te Ngariki Kokiri, Andre Theis, Cam Noble, Mona (Chaii), Andy Irvine, Satty, Viv Mellish, Benji James, Jordan and the whole DD team, Jess and Callum from Cult Artists, Ben Wallace and Holiday Records, and the teams at New Zealand On Air and the New Zealand Music Commission.
        </div>
      </div>
      <div style="font-size:12px; color:#777; margin-top:12px;">¬© 2026 Frankie Venter, under exclusive licence to Five AM. All rights reserved.</div>
    `
  },
  { title: 'turn me down ', content: `
    <div style="font-size:14px;color:#222;line-height:1.8;">
      <b>Artist:</b> Frankie Venter<br>
      <b>Writers:</b> Frankie Venter, Rory Noble<br>
      <b>Producers:</b> Rory Noble<br>
      <b>Instruments:</b> Rory Noble (Guitar, Bass, Keys, Synths, Backing Vocals)<br>
      <b>Mix:</b> Rory Noble<br>
      <b>Master:</b> Rory Noble
    </div>
  ` },
  { title: 'hint', content: `
    <div style="font-size:14px;color:#222;line-height:1.8;">
      <b>Artist:</b> Frankie Venter<br>
      <b>Writers:</b> Frankie Venter, Rory Noble, Josh Naley, Mark Landon<br>
      <b>Producers:</b> Rory Noble, Josh Naley, M-Phazes<br>
      <b>Instruments:</b> Rory Noble (Guitar, Bass, Keys, Synths, Backing Vocals), M-Phazes (Drums)<br>
      <b>Mix:</b> Rory Noble<br>
      <b>Master:</b> Rory Noble
    </div>
  ` },
  { title: "she‚Äôs leaving", content: `
    <div style="font-size:14px;color:#222;line-height:1.8;">
      <b>Artist:</b> Frankie Venter<br>
      <b>Writers:</b> Frankie Venter, Rory Noble, Aubrie Mitchell, Mark Landon<br>
      <b>Producers:</b> Rory Noble, Aubrie Mitchell, M-Phazes<br>
      <b>Instruments:</b> Rory Noble (Guitar, Bass, Keys, Synths, Backing Vocals), M-Phazes (Drums)<br>
      <b>Mix:</b> Rory Noble<br>
      <b>Master:</b> Rory Noble
    </div>
  ` },
  { title: 'how you like me now', content: `
    <div style="font-size:14px;color:#222;line-height:1.8;">
      <b>Artist:</b> Frankie Venter<br>
      <b>Writers:</b> Frankie Venter, Rory Noble, Dallas Austin<br>
      <b>Producers:</b> Rory Noble<br>
      <b>Instruments:</b> Rory Noble (Guitar, Bass, Keys, Synths, Backing Vocals), M-Phazes (Drums)<br>
      <b>Mix:</b> Rory Noble<br>
      <b>Master:</b> Jamie Boyo
    </div>
  ` },
  { title: 'just want you here', content: `
    <div style="font-size:14px;color:#222;line-height:1.8;">
      <b>Artist:</b> Frankie Venter<br>
      <b>Writers:</b> Frankie Venter, Rory Noble, Emma Wagner, Mark Landon<br>
      <b>Producers:</b> Rory Noble, M-Phazes<br>
      <b>Instruments:</b> Rory Noble (Guitar, Bass, Keys, Synths, Backing Vocals), M-Phazes (Drums)<br>
      <b>Mix:</b> Rory Noble<br>
      <b>Master:</b> Rory Noble
    </div>
  ` },
  { title: 'selfish', content: `
    <div style="font-size:14px;color:#222;line-height:1.8;">
      <b>Artist:</b> Frankie Venter<br>
      <b>Writers:</b> Frankie Venter, Rory Noble, Josh Naley, Mark Landon<br>
      <b>Producers:</b> Rory Noble, Josh Naley, M-Phazes<br>
      <b>Instruments:</b> Rory Noble (Guitar, Bass, Keys, Synths, Backing Vocals), M-Phazes (Drums), Josh Naley (Guitar)<br>
      <b>Mix:</b> Rory Noble<br>
      <b>Master:</b> Rory Noble
    </div>
  ` },
  { title: 'paris', content: `
    <div style="font-size:14px;color:#222;line-height:1.8;">
      <b>Artist:</b> Frankie Venter<br>
      <b>Writers:</b> Frankie Venter, Rory Noble, Mark Landon<br>
      <b>Producers:</b> Rory Noble, M-Phazes<br>
      <b>Instruments:</b> Rory Noble (Guitar, Bass, Keys, Synths, Backing Vocals), M-Phazes (Drums)<br>
      <b>Mix:</b> Rory Noble<br>
      <b>Master:</b> Rory Noble
    </div>
  ` },
  { title: 'real to me', content: `
    <div style="font-size:14px;color:#222;line-height:1.8;">
      <b>Artist:</b> Frankie Venter<br>
      <b>Writers:</b> Frankie Venter, Rory Noble, Josh Naley<br>
      <b>Producers:</b> Rory Noble, Josh Naley<br>
      <b>Instruments:</b> Rory Noble (Guitar, Bass, Keys, Synths, Backing Vocals), Josh Naley (Guitar)<br>
      <b>Mix:</b> Rory Noble<br>
      <b>Master:</b> Rory Noble
    </div>
  ` },
];

function loadCredits(){
  const listEl = document.getElementById('creditsList');
  const contentEl = document.getElementById('creditContent');
  if(!listEl || !contentEl) return;
  listEl.innerHTML = '';
  creditsListData.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'sidebar-item' + (i === 0 ? ' active' : '');
    div.innerHTML = item.title;
    div.onclick = () => selectCreditItem(i);
    listEl.appendChild(div);
  });
  selectCreditItem(0);
}

function selectCreditItem(i){
  const contentEl = document.getElementById('creditContent');
  if(!contentEl) return;
  document.querySelectorAll('#creditsList .sidebar-item').forEach((el, idx) => {
    el.classList.toggle('active', idx === i);
  });
  const item = creditsListData[i];
  contentEl.innerHTML = `<h2 style='font-weight:700;'>${item.title}</h2><div style='font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;'>${item.content}</div>`;
}

// ===== LYRICS (Split View, dynamic from .txt files) =====
const lyricsFiles = [
  { file: 'turn me down.txt' },
  { file: 'hint.txt' },
  { file: "she's leaving.txt" },
  { file: 'how you like me now.txt' },
  { file: 'just want you here.txt' },
  { file: 'selfish.txt' },
  { file: 'paris.txt' },
  { file: 'real to me.txt' },
];

// Inline fallback lyrics content to avoid fetch issues when opening via file://
const embeddedLyrics = {
  'turn me down.txt': `I'll leave the light on when you get in bed 'cause I know that you'll be out again
as fast as you walked in
You're always looking around behind you even when I'm right beside you
What are you scared to do?

And I could just lay here, put all my pride aside and wait here, given you my best parts for two years, just for you to be undecided
And you could have seen it coming, the car was crashing, you steered it off a cliff
How did we get where we did?

You'll scream and I'll shout, turn me on and turn me down
Say you can't live without me and you want to work things out
Don't know if you're selfish or irresponsible 
I wouldn't know, I shut you out while I was drowning in my room and you were over at her house
You wanna be alone but too selfish to let me go

Force myself not to read into your texts
Can't control what you're gonna do next
And if you need me, you really should have wanted to see me
I shouldn't feel more when I'm even speaking
You got me needy

And I could just lay here, put all my pride aside and wait here, giving you my best parts for two years, just for you to be undecided
And you could have seen it coming, the car was crashing, you steered it off a cliff
How did we get where we did?

You'll scream and I'll shout, turn me on and turn me down
Say you can't live without me and you want to work things out
Don't know if you're selfish or irresponsible
But I wouldn't know, I shut you out while I was drowning in my room and you were over at her house
`,
  'hint.txt': `Generational heartthrob, he's so infatuated wrote me a love song,
But is there a switch i could shut off, 'cause now I'm looking in his eyes and they're bloodshot
But baby, it's only your money that you're wasting,
buy me another of the same drink

Doesn't know we're playing for the same team
He plays guitar in a cool band, cool friends and cool clothes with his cool fans

Thinks i hang on his sweater, he's not smart but he don't know any better
Don't hate me, you and I are looking for the same things
Arm around my shoulder got me shaking
Doesn't know we're playing for the same team

He's so oblivious, trying to get me to go home with him
But he don't know me like I know him,
can't pick up on a hint

He calls me over and says nothing at all
I'm so uninterested, but it's not his fault
was nice to meet ya and nicer to leave ya
I wanna tell him no but I'm not his teacher
I want somebody with different features,
different sneakers, but he's into FIFA

He's so oblivious, trying to get me to go home with him
But he don't know me like I know him,
can't pick up on a hint

He's so oblivious, trying to get me to go home with him
But he don't know me like I know him,
can't pick up on a hint`,
  "she's leaving.txt": `I admit I walked in like I was doing fine
never question, never worry ‚Äòbout another guy
Turn my phone off no distraction for my peace of mind

I'll find love in somebody else
Do you think about me it's hard to tell
bet you're doing better now and I wish you well
Everybody's always thinking I'm the bad guy
Saying it won't work and it's never the right time
But can you stay with me even if it's for the night?

She said that she's leaving
when no one is around to see it
I don't know how to tell you i need you 
and she meant every word I can't stop her, no it's over

She's leaving
and no one is around to see it
I don't know how to tell you, I need you
and she meant every word I can't stop her, no it's over

It's not like me to still care
I don't miss you anywhere
You try to fill the hole without me
And you can call it off, or call it what you want

Call my bluff and tell me it's a front
But you‚Äôll want me back when all is said and done
Everybody's always thinking I'm the bad guy
Saying it won't work and it's never the right time
But can you stay with me even if it's for the night?

She said that she's leaving
when no one is around to see it
I don't know how to tell ya, I need ya
and she meant every word I can't stop her, no it's over

She's leaving
when no one is around to see it
I don't know how to tell you, I need you
and she meant every word I can't stop her, no it's over`,
  'how you like me now.txt': `Honey, why you switching up?
You know I don't get it, you act like you don't give a fuck
Why you putting on a show? It's funny
You always wanna hold me, but never wanna know me, but you're just another sad clown

Oh, how you like me now?
Out with your friends, trouble in the next, just getting by 'til your next pack of cigarettes
Generations, fucked, shit out of luck, everybody running around doing too much

And I don't really wanna deal with these emotions
Like turning up to the store when it's closing

Honey, why you switching up?
You know I don't get it, you act like you don't give a fuck
Why you putting on a show? It's funny
You always wanna hold me, but never wanna know me, but you're just another sad clown

Oh, how you like me now?
Oh, how you like me now?

Sometimes I don't know why you do this
Taking hints from who you're in the room with
You think I'm mad but I'm not. No you can't come back, can't cancel your spot
I hate to tell you I'm breaking off
That's how it is when we're better off

Honey, why you switching up?
You know I don't get it, you act like you don't give a fuck
Why you putting on a show? It's funny
You always wanna hold me, but never wanna know me, but you're just another sad clown

Oh, how you like me now?
Honey, why you switching up?
You know I don't get it, you act like you don't give a fuck
Why you putting on a show? It's funny
You always wanna hold me, but never wanna know me, but you're just another sad clown

Oh, how you like me now?
`,
  'just want you here.txt': `Back of the car, going 90 way too far
Don't wanna miss my set at 6 
And I'm distracted when I'm not with you
I wish you could be here to sing this wrong 
And sure my life is busy when I'm touring different cities
and yeah you think it's pretty cool
Don't think you want something from me, yeah I only want you on me
I'll travel the world just to see my girl

A thousand faces, going different places
I don't care, I just want you here
Pack you in my bag, you're so cute it makes me sad
and I don't care, I just want you here

A thousand different meanings, gotta pack up all my feelings
Sleep through all my alarms
And yeah we're both exhausted, but this is what we wanted
(ill call you if it gets too hard)
Feel like a loser, focus on my future
I haven't seen you in so long

And sure your life is busy when we're both in different cities
Yeah there's something missing, I should just be kissing you
A thousand faces, going different places

I don't care, I just want you here
Pack you in my bag, you're so cute it makes me sad
and I don't care, I just want you here

So wont you come on over, I can lean onto your shoulder
And we're only getting older, this window seats getting colder
So won't you love me honey, and just say that youre proud of me
cause your words of affirmation, will beat any destination
But don't need you to praise me, just wanna be with my lady

Whisper in my ear, wanna keep you near
I can't stand being alone, wont leave my house 'cause you're my home
I don't care, I just want you here
`,
  'selfish.txt': `Seven days a week
Keep both of your eyes on me
Stay here and don't leave
Making up for lost time, can we
Lose all of our sleep
Our stars are aligned maybe
Ill Start calling you mine, baby

I want you alone now, baby come home now, maybe I'm selfish
The rumours i love you, maybe they're all true and I can't help it
I don't wanna see you with anyone else now, baby excuse me
But I can't help it, I want you all to myself, yeah, I'm selfish

Oh, I've been up late and I've been thinking, who were you out with, what were you drinking?
Not that I care, but was anyone handsy? I don't wanna share you, is that a bad thing?
What if you were all mine, keep you on my good side, I would always treat you like you're royalty
And maybe if it feels right, we could get the knot tied, you could be a loyal to me

I want you alone now, baby come home now, maybe I'm selfish
The rumours, maybe they're all true, and I can't help it
I don't wanna see you with anyone else now, baby excuse me
But I can't help it, I want you all to myself, yeah, I'm selfish
`,
  'paris.txt': `Remember we got halfway to Paris till it wasn't what you imagined
It Lost its magic
I still think we could have worked if you let it 
You got internalised shit with your parents 
and I can't fix it for you 

Oysters and caviar, putting things on your mom's card
Taking out the Porsche and nearly crash it going way too hard
Am I different than you thought I was? Did you think that I'd like all this stuff?
Or is who I am just not enough for you, for you?

I can't, I don't wanna listen
Don't say that we're too different
This Could've worked if you let it
Shit admit you gave up on the idea of us
I let you in, you're the one
Feel so dumb. Just forget it

Are you the same person that you were at the start?
Walking 'round collecting souvenirs of other people's hearts
You want me here but not because you're in love like you said you were
Keep me around to fill a hole that you know is unfillable

Oysters and caviar, putting things on your mom's card
Taking out the Porsche and nearly crash it going way too hard
Am I different than you thought I was? Did you think that I'd like all this stuff?
Or is who I am just not enough for you, for you?

I can't, I don't wanna listen. Don't say that we're too different
Could've worked if you let it
Shit admit you gave up on the idea of us
I let you in, you're the one. Feel so dumb. Just forget it
`,
  'real to me.txt': `i‚Äôve been in bed for days, your pictures lighting up my face
I know I shouldn't search your name, but I'll do it anyway
Are you fine? Are you with your friends or are you forgetting all about it?
Do you cry or get drunk instead? Were we something I'd imagined?

Was it real to you? It was real to me
Were there parts of us you were questioning,
you were such a big deal to me,
big deal to me

Was it real to you? Did you cry for me?
When we fell apart, did you feel a thing?
You were such a big deal to me, it was real to me
It was real to me

You said you don't see a future in us, can I say that we dated, is that what it was?
And I can't get a word out of you when we talk, say you don't have the heart now to just break it off
We were drunk in your car and the truth came undone
And the knot in my stomach appeared, now you're gone
And the thing that you got off your chest was my heart, but you don't seem to care anymore

Was it real to you? It was real to me
Were there parts of us you were questioning?
You were such a big deal to me, big deal to me

Was it real to you? Did you cry for me?
When we fell apart, did you feel a thing?
You were such a big deal to me, it was real to me, it was real to me

When you gave me your promise it'd always be us
Were you always dishonest? Did I dream it up?
The ‚Äòi love you‚Äôs were real to me, a big deal to me, 

I meant everything.
`
};

function toTitle(name){
  const base = name.replace(/\.txt$/i, '');
  return base.toLowerCase();
}

function escapeHtml(str){
  return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[s]));
}

function loadLyrics() {
  const list = document.getElementById('lyricsList');
  const content = document.getElementById('lyricContent');
  if(!list || !content) return;
  if(list.children.length > 0) return;
  lyricsFiles.forEach((entry, i) => {
    const title = toTitle(entry.file);
    const item = document.createElement('div');
    item.className = 'sidebar-item';
    item.innerText = title;
    item.onclick = async () => {
      document.querySelectorAll('#lyricsList .sidebar-item').forEach(el => el.classList.remove('active'));
      item.classList.add('active');
      // Prefer inline embedded lyrics to avoid local file fetch issues
      const local = embeddedLyrics[entry.file];
      if(local){
        const safeLocal = escapeHtml(local).replace(/\r?\n/g, '<br>');
        content.innerHTML = `<h2>${title}</h2><p>${safeLocal}</p>`;
        return;
      }
      try {
        const res = await fetch(encodeURI(entry.file));
        const txt = await res.text();
        const safe = escapeHtml(txt).replace(/\r?\n/g, '<br>');
        content.innerHTML = `<h2>${title}</h2><p>${safe}</p>`;
      } catch(e) {
        content.innerHTML = `<h2>${title}</h2><p style="color:#b00;">Unable to load lyrics.</p>`;
      }
    };
    list.appendChild(item);
    if(i===0) item.click();
  });
}

// ===== LETTERS =====
function initLetters(){
  const form = document.getElementById('lettersForm');
  if(!form) return;
  if(form.dataset.bound === 'true') return;
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const nameEl = document.getElementById('fanName');
    const emailEl = document.getElementById('fanEmail');
    const msgEl = document.getElementById('fanMessage');
    const name = (nameEl && nameEl.value) || '';
    const email = (emailEl && emailEl.value) || '';
    const message = (msgEl && msgEl.value) || '';
    const thanks = document.getElementById('lettersThanks');
    if(!email || typeof email !== 'string' || !email.includes('@')){
      if(thanks){
        thanks.textContent = 'Please enter a valid email address.';
        thanks.style.display = 'block';
        thanks.style.color = '#ff5f56';
        setTimeout(() => { thanks.style.display = 'none'; thanks.style.color = '#27c93f'; }, 3000);
      }
      return;
    }
    try {
      const res = await fetch('/api/send-letter', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, email, message })
      });
      if(res.ok){
        if(thanks){
          thanks.textContent = 'Thank you for your message!';
          thanks.style.display = 'block';
          setTimeout(() => { thanks.style.display = 'none'; }, 3000);
        }
        const msg = document.getElementById('fanMessage');
        if(msg) msg.value = '';
        if(emailEl) emailEl.value = '';
        if(nameEl) nameEl.value = '';
      } else {
        const data = await res.json().catch(()=>({}));
        if(thanks){
          const detail = (data && data.detail && data.detail.message) || (data && data.error) || 'Failed to send. Please try again later.';
          thanks.textContent = detail;
          thanks.style.display = 'block';
          thanks.style.color = '#ff5f56';
          setTimeout(() => { thanks.style.display = 'none'; thanks.style.color = '#27c93f'; }, 4000);
        }
      }
    } catch(err){
      if(thanks){
        thanks.textContent = 'Error sending message.';
        thanks.style.display = 'block';
        thanks.style.color = '#ff5f56';
        setTimeout(() => { thanks.style.display = 'none'; thanks.style.color = '#27c93f'; }, 3000);
      }
    }
  });
  form.dataset.bound = 'true';
}

// ===== PONG GAME =====
function initPong(){
  const canvas = document.getElementById('pongCanvas');
  const scoreEl = document.getElementById('pongScore');
  const highEl = document.getElementById('pongHigh');
  const playBtn = document.getElementById('pongPlayBtn');
  if(!canvas || !scoreEl) return;
  const ctx = canvas.getContext('2d');
  ctx.imageSmoothingEnabled = true;
  const W = canvas.width, H = canvas.height;

  // Local-only background
  const BG_SRC = 'fc55f708c8d651c923055ab1a1d749be.jpg';
  const bgImg = new Image();
  let bgReady = false;
  bgImg.onload = ()=>{ bgReady = true; };
  bgImg.onerror = ()=>{ bgReady = false; };
  bgImg.src = BG_SRC;

  // Game state
  const BALL_SPEED = 5;
  const PADDLE_W = 120, PADDLE_H = 16;
  const MAX_BOUNCE_ANGLE = Math.PI/3; // 60¬∞
  let running = false, gameOver = false;
  let highScore = parseInt(localStorage.getItem('pongHighScore') || '0', 10);
  if(highEl) highEl.textContent = String(highScore);
  const state = {
    paddle: { x: (W-PADDLE_W)/2, y: H - PADDLE_H - 2, w: PADDLE_W, h: PADDLE_H, vx: 0, speed: 4 },
    ball: { x: W/2, y: H/2, r: 8, vx: 0, vy: 0 },
    score: 0
  };

  function launchBall(){
    const dir = Math.random() < 0.5 ? -1 : 1;
    const angle = Math.random() * (MAX_BOUNCE_ANGLE - Math.PI/6) + Math.PI/6; // 30¬∞..60¬∞
    state.ball.vx = BALL_SPEED * Math.sin(angle) * dir;
    state.ball.vy = -BALL_SPEED * Math.cos(angle);
  }

  function reset(){
    state.paddle.x = (W-PADDLE_W)/2; state.paddle.y = H - state.paddle.h - 2; state.paddle.vx = state.paddle.speed; // always moving right initially
    state.ball.x = W/2; state.ball.y = H*0.6; state.ball.r = 8;
    launchBall();
    state.score = 0; scoreEl.textContent = '0';
    gameOver = false; if(playBtn) playBtn.style.display = 'none';
  }

  function drawRoundedRect(x, y, w, h, r){
    ctx.beginPath();
    ctx.moveTo(x+r, y);
    ctx.arcTo(x+w, y, x+w, y+h, r);
    ctx.arcTo(x+w, y+h, x, y+h, r);
    ctx.arcTo(x, y+h, x, y, r);
    ctx.arcTo(x, y, x+w, y, r);
    ctx.closePath();
  }

  function render(){
    // Background
    if(bgReady) ctx.drawImage(bgImg, 0, 0, W, H);
    else { ctx.fillStyle = '#0b0b12'; ctx.fillRect(0,0,W,H); }
    // Subtle overlay for readability
    ctx.fillStyle = 'rgba(0,0,0,0.25)';
    ctx.fillRect(0,0,W,H);

    // Paddle
    ctx.fillStyle = '#ff69b4';
    ctx.shadowColor = 'rgba(255,105,180,0.6)';
    ctx.shadowBlur = 12;
    drawRoundedRect(state.paddle.x, state.paddle.y, state.paddle.w, state.paddle.h, 8);
    ctx.fill();
    ctx.shadowBlur = 0;

    // Ball with glow
    ctx.fillStyle = '#8a2be2';
    ctx.shadowColor = 'rgba(138,43,226,0.7)';
    ctx.shadowBlur = 16;
    ctx.beginPath(); ctx.arc(state.ball.x, state.ball.y, state.ball.r, 0, Math.PI*2); ctx.fill();
    ctx.shadowBlur = 0;

    // Text
    ctx.fillStyle = '#fff';
    ctx.font = 'bold 18px -apple-system,BlinkMacSystemFont,Segoe UI';
    ctx.fillText(`Score: ${state.score}`, 16, 26);
    if(highEl) highEl.textContent = String(highScore);

    if(gameOver){
      ctx.fillStyle = 'rgba(0,0,0,0.5)';
      ctx.fillRect(0,0,W,H);
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 28px -apple-system,BlinkMacSystemFont,Segoe UI';
      ctx.textAlign = 'center';
      ctx.textAlign = 'start';
    }
  }

  function normalizeBall(){
    const mag = Math.hypot(state.ball.vx, state.ball.vy) || 1;
    state.ball.vx = BALL_SPEED * (state.ball.vx / mag);
    state.ball.vy = BALL_SPEED * (state.ball.vy / mag);
  }

  function update(){
    // Paddle
    state.paddle.x += state.paddle.vx;
    if(state.paddle.x <= 0){
      state.paddle.x = 0;
      state.paddle.vx = Math.abs(state.paddle.vx); // bounce right
    } else if(state.paddle.x >= W - state.paddle.w){
      state.paddle.x = W - state.paddle.w;
      state.paddle.vx = -Math.abs(state.paddle.vx); // bounce left
    }

    // Ball
    state.ball.x += state.ball.vx; state.ball.y += state.ball.vy;

    // Walls
    if(state.ball.x - state.ball.r <= 0 || state.ball.x + state.ball.r >= W){
      state.ball.vx *= -1; normalizeBall();
    }
    if(state.ball.y - state.ball.r <= 0){
      state.ball.vy *= -1; normalizeBall();
    }

    // Paddle collision
    if(state.ball.y + state.ball.r >= state.paddle.y && state.ball.y - state.ball.r <= state.paddle.y + state.paddle.h){
      if(state.ball.x >= state.paddle.x && state.ball.x <= state.paddle.x + state.paddle.w){
        const rel = ((state.ball.x - state.paddle.x) / state.paddle.w) - 0.5; // -0.5..0.5
        const angle = rel * 2 * MAX_BOUNCE_ANGLE;
        state.ball.vx = BALL_SPEED * Math.sin(angle);
        state.ball.vy = -BALL_SPEED * Math.cos(angle);
        state.score += 1; scoreEl.textContent = String(state.score);
      }
    }

    // Miss
    if(state.ball.y - state.ball.r > H){
      gameOver = true; running = false;
      if(state.score > highScore){ highScore = state.score; localStorage.setItem('pongHighScore', String(highScore)); }
      if(playBtn) playBtn.style.display = 'inline-block';
    }
  }

  function loop(){
    if(!running){ render(); return; }
    update(); render(); requestAnimationFrame(loop);
  }

  // Controls
  function onKeyDown(e){
    if(e.key === 'ArrowLeft') state.paddle.vx = -state.paddle.speed;
    else if(e.key === 'ArrowRight') state.paddle.vx = state.paddle.speed;
    else if(e.key === 'Enter'){
      if(gameOver && !running){ reset(); running = true; requestAnimationFrame(loop); }
    }
  }
  function onKeyUp(e){ /* keep moving; do not stop vx */ }

  if(canvas && canvas.dataset.pongBound !== 'true'){
    window.addEventListener('keydown', onKeyDown);
    window.addEventListener('keyup', onKeyUp);
    if(playBtn){ playBtn.addEventListener('click', ()=>{ if(!running){ reset(); running = true; requestAnimationFrame(loop); } }); }
    canvas.dataset.pongBound = 'true';
  }

  // Expose stop so games menu can halt the loop
  window.stopPong = ()=>{ running = false; };
  window.resetPong = reset;
  reset(); running = true; requestAnimationFrame(loop);
}

// ===== TO-DO APP =====
const todoItems = [
  { title: 'Finalise EP', note: 'Choose all songs for the EP, and put it on Spotify', done: false },
  { title: 'Take cool press photos', note: 'Select top 6 for media kit', done: true },
  { title: 'Make a music video!!', note: 'Make a really cool music video for the EP', done: false },
  { title: 'Promote the EP on my socials', note: 'Remember to schedule posts and engage with my awesome fans.', done: false },
  { title: 'Practise for Malcom Todd show', note: 'To be completed daily.', done: true }
];

function initTodo(){
  const list = document.getElementById('todoList');
  if(!list) return;
  list.innerHTML = '';
  const state = JSON.parse(localStorage.getItem('fv_todo_state') || 'null');
  const items = todoItems.map((t, i) => {
    const done = state && typeof state[i] !== 'undefined' ? !!state[i] : !!t.done;
    return { ...t, done };
  });
  items.forEach((item, i) => {
    const li = document.createElement('li');
    li.className = 'todo-item' + (item.done ? ' todo-done' : '');
    const toggle = document.createElement('div');
    toggle.className = 'todo-toggle';
    const thumb = document.createElement('div');
    thumb.className = 'thumb';
    toggle.appendChild(thumb);
    toggle.title = 'Toggle complete';
    toggle.addEventListener('click', () => {
      item.done = !item.done;
      li.classList.toggle('todo-done', item.done);
      const newState = items.map(it => it.done);
      localStorage.setItem('fv_todo_state', JSON.stringify(newState));
      updateProgress();
    });
    const textWrap = document.createElement('div');
    textWrap.className = 'todo-texts';
    const title = document.createElement('div');
    title.className = 'todo-title';
    title.textContent = item.title;
    const note = document.createElement('div');
    note.className = 'todo-note';
    note.textContent = item.note;
    textWrap.appendChild(title);
    textWrap.appendChild(note);
    li.appendChild(toggle);
    li.appendChild(textWrap);
    list.appendChild(li);
  });
  updateProgress();

  function updateProgress(){
    const summary = document.getElementById('todoSummary');
    const bar = document.getElementById('todoProgress');
    const total = items.length;
    const doneCount = items.filter(it => it.done).length;
    if(summary) summary.textContent = `${doneCount}/${total} done`;
    if(bar) bar.style.width = `${Math.round((doneCount/total)*100)}%`;
  }
}

// (Tetris removed per request)

// Videos data
const videos = [
  { title: "Music Videos", items: ["1158647574"] },
  { title: "From Frankie", items: ["945678123"] } // Replace with actual Vimeo ID for Frankie's message
];

function loadVideos() {
  const grid = document.getElementById("videoGrid");
  if(!grid) return;
  grid.innerHTML = "";
  // Redesigned video library view
  const wrap = document.createElement('div');
  wrap.className = 'video-library';
  const files = [
    { title: 'Music Videos', vimeoId: (videos[0] && videos[0].items[0]) || null },
    { title: 'From Frankie', vimeoId: (videos[1] && videos[1].items[0]) || null },
  ];
  files.forEach(file => {
    const card = document.createElement('div');
    card.className = 'video-card';
    card.innerHTML = `<div class="video-icon">üé¨</div><div class="video-title">${file.title}</div>`;
    card.onclick = () => openVideoModal(file.vimeoId, file.title);
    wrap.appendChild(card);
  });
  grid.appendChild(wrap);
}

function openVideoModal(vimeoId, title){
  const modal = document.getElementById('videoModal');
  const iframe = document.getElementById('videoIframe');
  if(!modal || !iframe) return;
  if(!vimeoId){
    alert('No video available.');
    return;
  }
  iframe.src = `https://player.vimeo.com/video/${vimeoId}?autoplay=1&badge=0&autopause=0&player_id=0&app_id=58479`;
  modal.style.display = 'flex';
}

function closeVideoModal(){
  const modal = document.getElementById('videoModal');
  const iframe = document.getElementById('videoIframe');
  if(iframe) iframe.src = '';
  if(modal) modal.style.display = 'none';
}

async function joinWaitlist(){
  const emailInput = document.getElementById("tourEmail");
  const email = (emailInput && emailInput.value) || '';
  const messageEl = document.getElementById("formMessage");
  if(!messageEl) return;
  if(!email || !email.includes("@")){
    messageEl.textContent = "Please enter a valid email";
    messageEl.style.color = "#ff5f56";
    return;
  }
  messageEl.textContent = "Sending...";
  messageEl.style.color = "#666";
  try{
    const res = await fetch('/api/join-waitlist', {
      method: 'POST', headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email })
    });
    if(res.ok){
      messageEl.textContent = "‚úì Thanks! You're on the list.";
      messageEl.style.color = "#27c93f";
      if(emailInput) emailInput.value = '';
    } else {
      const data = await res.json().catch(()=>({}));
      messageEl.textContent = (data && data.detail && data.detail.message) || (data && data.error) || "Failed to join. Please try again later.";
      messageEl.style.color = "#ff5f56";
    }
  }catch(e){
    messageEl.textContent = "Error connecting to server.";
    messageEl.style.color = "#ff5f56";
  }
  setTimeout(()=>{ messageEl.textContent = ""; }, 4000);
}

setInterval(updateClock,1000);
updateClock();

// Preload content so windows are populated when opened
document.addEventListener('DOMContentLoaded', function(){
  window.ENABLE_GATE = true; // enable password gate
  // Show boot overlay, preload assets, then show login if needed
  (async ()=>{
    const boot = document.getElementById('bootOverlay');
    if(boot) boot.style.display = 'flex';
    try { await preloadAssets(); } catch(_){}
    if(boot) boot.style.display = 'none';
    // If not authorized yet, show login overlay
    if(window.ENABLE_GATE){
      initGate();
    }
  })();
  // Mobile overlay removed
  // Enable drag/resize on windows
  try { initWindowInteractions(); } catch(e) { console.warn('Init window interactions error', e); }
  initMenuDropdown();
  try { initIconRipple(); } catch(e) { console.warn('Ripple init error', e); }
  try { loadGallery(); } catch(e) { console.warn('Gallery init error', e); }
  try { loadVideos(); } catch(e) { console.warn('Videos init error', e); }
  try { /* lazy init draw on open */ } catch(e) { console.warn('Draw init error', e); }
});

// ESC key to close windows
document.addEventListener('keydown', function(event) {
  if(event.key === 'Escape') {
    document.querySelectorAll(".window").forEach(w => {
      w.style.display="none";
      w.classList.remove("active");
    });
  }
});

// Ensure all script blocks are properly closed
// (fallback brace in case of earlier unmatched opening)
try{}catch(_){}
</script>

<div class="footer">
<p>Built by  <a href="https://fiveammusic.com" target="_blank"> Five AM</a></p>
</div>

</body>
</html>